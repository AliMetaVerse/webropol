<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BI Dashboards - Survey & Reporting Reports | Webropol</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- FontAwesome Pro -->
  <script src="https://kit.fontawesome.com/50ef2d3cf8.js" crossorigin="anonymous"></script>
  
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'webropol-primary': { 
              50: '#f0fdff', 
              100: '#ccfbff', 
              200: '#99f6ff', 
              300: '#4de9ff', 
              400: '#06d9f4', 
              500: '#06b6d4', 
              600: '#0891b2', 
              700: '#0e7490', 
              800: '#155e75', 
              900: '#164e63' 
            },
            'webropol-gray': { 
              50: '#f8fafc', 
              100: '#f1f5f9', 
              200: '#e2e8f0', 
              300: '#cbd5e1', 
              400: '#94a3b8', 
              500: '#64748b', 
              600: '#475569', 
              700: '#334155', 
              800: '#1e293b', 
              900: '#0f172a' 
            },
            'webropol-green': {
              50: '#f0fdf4',
              100: '#dcfce7',
              500: '#22c55e',
              700: '#15803d'
            },
            'webropol-red': {
              50: '#fef2f2',
              100: '#fee2e2',
              500: '#ef4444',
              700: '#b91c1c'
            },
            'webropol-royalViolet': {
              500: '#8b5cf6',
              600: '#7c3aed'
            },
            'webropol-royalBlue': {
              500: '#3b82f6',
              600: '#2563eb'
            },
            'webropol-royalTurquoise': {
              500: '#06b6d4',
              600: '#0891b2'
            }
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif']
          },
          boxShadow: {
            'soft': '0 2px 8px rgba(0, 0, 0, 0.05)',
            'medium': '0 4px 16px rgba(0, 0, 0, 0.1)',
            'card': '0 1px 3px rgba(0, 0, 0, 0.1)'
          }
        }
      }
    }
  </script>
  
  <!-- Inter Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Design System Components -->
  <script src="../design-system/components/navigation/Header.js" type="module"></script>
  
  <style>
    /* ============================================
       WEBROPOL Z-INDEX LAYERING SYSTEM
       ============================================
       
       RULE OF THUMB: All dropdowns, popovers, and menus MUST use z-50 
       to stay on top of all content except modals.
       
       Z-Index Hierarchy (lowest to highest):
       - z-0    : Default/Base content
       - z-10   : Elevated cards, sticky elements
       - z-20   : Floating elements (badges, tooltips)
       - z-30   : Fixed navigation (sidebars, bottom bars)
       - z-40   : Sticky headers, top navigation
       - z-50   : Dropdowns, popovers, context menus (STANDARD FOR ALL DROPDOWNS)
       - z-[60] : Overlay backgrounds (for modals)
       - z-[70] : Modal dialogs (highest layer)
       
       IMPLEMENTATION GUIDE:
       1. All dropdown menus MUST have: class="... z-50"
       2. All popovers MUST have: class="... z-50"
       3. All context menus MUST have: class="... z-50"
       4. Modal overlays: class="... z-[60]"
       5. Modal dialogs: class="... z-[70]"
       
       EXAMPLE:
       <div class="absolute right-0 top-full mt-2 bg-white rounded-xl shadow-medium z-50">
         <!-- Dropdown content -->
       </div>
       
       DO NOT use z-values between 50-60 or 60-70 for custom purposes.
       ============================================ */
  </style>
</head>
<body x-data="biDashboardsApp()" class="bg-webropol-gray-50">
  
  <!-- Header -->
  <header class="bg-white border-b-2 border-webropol-primary-200 shadow-soft sticky top-0 z-40">
    <div class="flex items-center justify-between px-4 sm:px-8 py-3 sm:py-4 gap-2">
      <!-- Logo -->
      <div class="flex items-center gap-2 sm:gap-3 flex-shrink-0">
        <img src="../img/logo/bi-logo.png" alt="BI Dashboards" class="h-10 w-auto sm:h-10 md:h-10 lg:h-10 object-contain" />
      </div>
      
      <!-- User Menu & Hamburger Menu Container -->
      <div 
  class="flex items-center gap-1 sm:gap-2 flex-shrink-0"
  x-data="{ userMenuOpen: false }">
        
        <!-- Survey & Report Button -->
        <a href="../surveys/index.html" 
           class="flex items-center gap-1 sm:gap-3 px-2 sm:px-4 py-2 bg-white hover:bg-webropol-gray-50 text-webropol-gray-700 rounded-xl transition-all border-2 border-webropol-gray-300 font-semibold text-sm sm:text-base">
          <div class="w-6 h-6 sm:w-8 sm:h-8 bg-webropol-gray-200 rounded-lg flex items-center justify-center flex-shrink-0">
            <i class="fal fa-chart-bar text-webropol-gray-600 text-xs sm:text-base"></i>
          </div>
          <span class="hidden sm:inline">Survey & Report</span>
        </a>
        
        <!-- User Menu -->
        <div class="relative">
          <button 
            @click="userMenuOpen = !userMenuOpen"
            class="flex items-center gap-1 sm:gap-3 px-2 sm:px-4 py-2 bg-white hover:bg-webropol-gray-50 text-webropol-gray-700 rounded-xl transition-all border-2 border-webropol-gray-300">
            <div class="w-6 h-6 sm:w-8 sm:h-8 bg-webropol-gray-200 rounded-lg flex items-center justify-center flex-shrink-0">
              <i class="fal fa-user text-webropol-gray-600 text-xs sm:text-base"></i>
            </div>
            <span class="font-semibold text-sm sm:text-base hidden sm:inline">Admin User</span>
            <i class="fal fa-chevron-down text-xs transition-transform" :class="userMenuOpen && 'rotate-180'"></i>
          </button>
          
          <!-- Dropdown Menu -->
          <div 
            x-show="userMenuOpen"
            @click.away="userMenuOpen = false"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 transform scale-95"
            x-transition:enter-end="opacity-100 transform scale-100"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="opacity-100 transform scale-100"
            x-transition:leave-end="opacity-0 transform scale-95"
            class="absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-medium border border-webropol-gray-200 py-2 z-50"
            style="display: none;">
            <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
              <i class="fal fa-user text-webropol-gray-600"></i>
              <span class="text-webropol-gray-700">My Profile</span>
            </a>
            <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
              <i class="fal fa-language text-webropol-gray-600"></i>
              <span class="text-webropol-gray-700">Language</span>
            </a>
            <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
              <i class="fal fa-globe text-webropol-gray-600"></i>
              <span class="text-webropol-gray-700">Environment Name</span>
            </a>
            <div class="border-t border-webropol-gray-200 my-2"></div>
            <a href="#" @click.prevent="handleLogout" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-red-50 transition-colors text-webropol-red-600">
              <i class="fal fa-sign-out"></i>
              <span>Sign out</span>
            </a>
          </div>
        </div>
        
        
      </div>
    </div>
  </header>
  
  <div class="flex h-screen overflow-hidden">
    
      
      <!-- Main Content -->
      <main class="flex-1 overflow-y-auto bg-webropol-gray-50" role="main">
        <div class="max-w-[1800px] mx-auto px-8 py-6">
          
          
          
          <!-- Navigation Tabs -->
          <div class="mb-6">
            <div class="flex items-center justify-between bg-white rounded-xl shadow-soft p-2 flex-wrap sm:flex-nowrap gap-2">
              <div class="flex gap-1 sm:gap-2 overflow-x-auto flex-1 w-full sm:w-auto" style="scrollbar-width: thin;">
                <button 
                  @click="activeTab = 'employee-experience'"
                  :class="activeTab === 'employee-experience' ? 'bg-webropol-green-50 text-webropol-green-700 shadow-sm' : 'text-webropol-gray-600 hover:bg-webropol-gray-50'"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 font-medium text-xs sm:text-base rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap flex-shrink-0">
                  <i class="fal fa-users"></i>
                  <span class="hidden md:inline">Employee Experience</span>
                  <span class="inline md:hidden">Employees</span>
                </button>

                <button 
                  @click="activeTab = 'reports'"
                  :class="activeTab === 'reports' ? 'bg-webropol-primary-50 text-webropol-primary-700 shadow-sm' : 'text-webropol-gray-600 hover:bg-webropol-gray-50'"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 font-medium text-xs sm:text-base rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap flex-shrink-0">
                  <i class="fal fa-chart-bar"></i>
                  <span>Reports</span>
                </button>

                <button 
                  @click="activeTab = 'dashboards'"
                  :class="activeTab === 'dashboards' ? 'bg-webropol-royalViolet-500/10 text-webropol-royalViolet-700 shadow-sm' : 'text-webropol-gray-600 hover:bg-webropol-gray-50'"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 font-medium text-xs sm:text-base rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap flex-shrink-0">
                  <i class="fal fa-tachometer-alt"></i>
                  <span>Dashboards</span>
                </button>

                <button 
                  @click="activeTab = '360-evaluations'"
                  :class="activeTab === '360-evaluations' ? 'bg-webropol-yellow-50 text-webropol-yellow-700 shadow-sm' : 'text-webropol-gray-600 hover:bg-webropol-gray-50'"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 font-medium text-xs sm:text-base rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap flex-shrink-0">
                  <i class="fal fa-360-degrees"></i>
                  <span class="hidden sm:inline">360 Evaluations</span>
                  <span class="inline sm:hidden">360</span>
                </button>

                <button 
                  @click="activeTab = 'admin-tools'"
                  :class="activeTab === 'admin-tools' ? 'bg-webropol-red-50 text-webropol-red-700 shadow-sm' : 'text-webropol-gray-600 hover:bg-webropol-gray-50'"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 font-medium text-xs sm:text-base rounded-lg transition-all flex items-center gap-1 sm:gap-2 whitespace-nowrap flex-shrink-0">
                  <i class="fal fa-cog"></i>
                  <span class="hidden lg:inline">Admin Tools</span>
                  <span class="inline lg:hidden">Admin</span>
                </button>
              </div>
              
              <!-- Apps Dropdown -->
              <div class="relative ml-0 sm:ml-2 flex-shrink-0" x-data="{ appsOpen: false, _onScroll: null,
                    openApps() { this.appsOpen = true; this.$nextTick(() => { const btn = this.$refs.appsBtn; const menu = this.$refs.appsMenu; if(!menu||!btn) return; if(!this.$refs.appsPlaceholder) { const ph = document.createElement('div'); ph.style.display='none'; this.$el.appendChild(ph); this.$refs.appsPlaceholder = ph; } if(menu.parentElement !== document.body) document.body.appendChild(menu); menu.style.position='fixed'; menu.style.zIndex='9999'; this.reposition(btn); this._onScroll = () => this.reposition(btn); window.addEventListener('scroll', this._onScroll, true); window.addEventListener('resize', this._onScroll); }); },
                    closeApps() { this.appsOpen = false; const menu = this.$refs.appsMenu; if(menu && this.$refs.appsPlaceholder && menu.parentElement === document.body) { this.$refs.appsPlaceholder.appendChild(menu); menu.style.position=''; menu.style.top=''; menu.style.left=''; menu.style.zIndex=''; } if(this._onScroll) { window.removeEventListener('scroll', this._onScroll, true); window.removeEventListener('resize', this._onScroll); this._onScroll = null; } },
                    reposition(btn) { const menu = this.$refs.appsMenu; if(!menu||!btn) return; const rect = btn.getBoundingClientRect(); menu.style.maxWidth = (window.innerWidth - 20) + 'px'; const width = menu.offsetWidth || 288; let top = rect.bottom + 8; let left = Math.max(10, rect.right - width); if(left + width > window.innerWidth - 10) left = window.innerWidth - width - 10; if(left < 10) left = 10; if(top + menu.offsetHeight > window.innerHeight - 10) { top = rect.top - menu.offsetHeight - 8; if(top < 10) top = 10; } menu.style.top = top + 'px'; menu.style.left = left + 'px'; }
                  }">
                <button x-ref="appsBtn"
                  @click="appsOpen ? closeApps() : openApps()"
                  class="px-2 sm:px-4 py-2 sm:py-2.5 text-xs sm:text-base text-webropol-gray-700 hover:bg-webropol-gray-50 rounded-lg transition-all flex items-center gap-1 sm:gap-2 font-medium whitespace-nowrap">
                  <i class="fal fa-th"></i>
                  <span class="hidden sm:inline">Apps</span>
                  <i class="fal fa-chevron-down text-xs transition-transform" :class="appsOpen && 'rotate-180'"></i>
                </button>
                
                <div x-ref="appsPlaceholder" style="display:none"></div>
                <div x-ref="appsMenu"
                  x-show="appsOpen"
                  @click.away="closeApps()"
                  x-transition:enter="transition ease-out duration-200"
                  x-transition:enter-start="opacity-0 transform scale-95"
                  x-transition:enter-end="opacity-100 transform scale-100"
                  x-transition:leave="transition ease-in duration-150"
                  x-transition:leave-start="opacity-100 transform scale-100"
                  x-transition:leave-end="opacity-0 transform scale-95"
                  class="w-72 bg-white rounded-xl shadow-medium border border-webropol-gray-200 py-2"
                  style="display: none;">
                  <!-- Menu Title -->
                  <div class="px-4 py-3 bg-gradient-to-r from-webropol-primary-50 to-webropol-primary-100 border-b-2 border-webropol-primary-200 mb-2">
                    <h3 class="text-base font-bold text-webropol-primary-700">
                      Survey & Report Platform
                    </h3>
                  </div>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-chart-pie text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Survey</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-calendar text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Events</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-flask text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">eTest</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-360-degrees text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">360</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-mobile text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Direct Mobile Survey</span>
                  </a>
                  <div class="border-t border-webropol-gray-200 my-2"></div>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-briefcase text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Case Management</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-book text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Handler Menu</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-tasks text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">WOTT</span>
                  </a>
                  <div class="border-t border-webropol-gray-200 my-2"></div>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-video text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Training Videos</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-cog text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Admin Tools</span>
                  </a>
                  <a href="#" class="flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors">
                    <i class="fal fa-shopping-cart text-webropol-primary-500"></i>
                    <span class="text-webropol-gray-700">Shop</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Employee Experience: UX tabs + dropdown + KPI widgets -->
          <div 
            x-show="activeTab === 'employee-experience'"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 -translate-y-2"
            x-transition:enter-end="opacity-100 translate-y-0"
            class="mb-6">
            
            <!-- Sub tabs -->
            <div class="flex items-center gap-4 mb-4">
              <button 
                @click="uxTab = 'home'"
                :class="uxTab === 'home' ? 'bg-webropol-primary-100 text-webropol-gray-900' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                class="px-4 py-2 rounded-lg transition-all flex items-center gap-2">
                <i class="fal fa-home"></i>
                <span>Home</span>
              </button>
              <button 
                @click="uxTab = 'responding'"
                :class="uxTab === 'responding' ? 'bg-webropol-primary-100 text-webropol-gray-900' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                class="px-4 py-2 rounded-lg transition-all flex items-center gap-2">
                <i class="fal fa-user-headset"></i>
                <span>Responding</span>
              </button>
              <button 
                @click="uxTab = 'follow-up'"
                :class="uxTab === 'follow-up' ? 'bg-webropol-primary-100 text-webropol-gray-900' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                class="px-4 py-2 rounded-lg transition-all flex items-center gap-2">
                <i class="fal fa-eye"></i>
                <span>Follow up</span>
              </button>
            </div>

            <!-- Section header and survey select -->
            <div class="mb-4">
              <h2 class="text-2xl font-bold text-webropol-gray-900 mb-3" x-text="uxTabLabel"></h2>
              <div class="relative inline-block" x-data="{ surveyMenuOpen: false, _onScroll:null,
                    openSurvey() { this.surveyMenuOpen = true; this.$nextTick(() => { const btn = this.$refs.surveyBtn; const menu = this.$refs.surveyMenu; if(!menu||!btn) return; if(!this.$refs.surveyPlaceholder) { const ph = document.createElement('div'); ph.style.display='none'; this.$el.appendChild(ph); this.$refs.surveyPlaceholder = ph; } if(menu.parentElement !== document.body) document.body.appendChild(menu); menu.style.position='fixed'; menu.style.zIndex='9999'; this.reposition(btn); this._onScroll = () => this.reposition(btn); window.addEventListener('scroll', this._onScroll, true); window.addEventListener('resize', this._onScroll); }); },
                    closeSurvey() { this.surveyMenuOpen = false; const menu = this.$refs.surveyMenu; if(menu && this.$refs.surveyPlaceholder && menu.parentElement === document.body) { this.$refs.surveyPlaceholder.appendChild(menu); menu.style.position=''; menu.style.top=''; menu.style.left=''; menu.style.zIndex=''; } if(this._onScroll) { window.removeEventListener('scroll', this._onScroll, true); window.removeEventListener('resize', this._onScroll); this._onScroll = null; } },
                    reposition(btn) { const menu = this.$refs.surveyMenu; if(!menu||!btn) return; const rect = btn.getBoundingClientRect(); menu.style.maxWidth = (window.innerWidth - 20) + 'px'; const width = menu.offsetWidth || 256; let top = rect.bottom + 8; let left = rect.left; if(left + width > window.innerWidth - 10) left = window.innerWidth - width - 10; if(left < 10) left = 10; if(top + menu.offsetHeight > window.innerHeight - 10) { top = rect.top - menu.offsetHeight - 8; if(top < 10) top = 10; } menu.style.top = top + 'px'; menu.style.left = left + 'px'; }
                  }">
                <button x-ref="surveyBtn" @click="surveyMenuOpen ? closeSurvey() : openSurvey()" class="w-64 text-left pl-10 pr-4 py-3 bg-white border border-webropol-gray-300 rounded-xl hover:bg-webropol-gray-50 transition-all flex items-center gap-2">
                  <i class="fal fa-search absolute left-4 text-webropol-gray-400"></i>
                  <span class="text-webropol-gray-700" x-text="selectedSurvey || 'Select survey'"></span>
                  <i class="fal fa-angle-down ml-auto text-webropol-gray-500"></i>
                </button>
                <div x-ref="surveyPlaceholder" style="display:none"></div>
                <!-- dropdown -->
                <div x-ref="surveyMenu" x-show="surveyMenuOpen" @click.away="closeSurvey()" class="w-64 bg-white rounded-xl border border-webropol-gray-200 shadow-medium max-h-72 overflow-y-auto" style="display: none;">
                  <template x-for="opt in surveyOptions" :key="opt">
                    <button @click="selectSurvey(opt)" class="w-full text-left px-4 py-2.5 hover:bg-webropol-gray-50 text-webropol-gray-700">
                      <span x-text="opt"></span>
                    </button>
                  </template>
                  <div x-show="surveyOptions.length === 0" class="px-4 py-3 text-sm text-webropol-gray-500">No surveys</div>
                </div>
              </div>
            </div>

            <!-- KPI widgets -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
              <!-- Reports -->
              <div class="bg-white rounded-xl p-5 border border-webropol-gray-200 shadow-soft">
                <div class="flex items-center justify-between mb-2">
                  <i class="fal fa-list-alt text-2xl text-webropol-primary-600"></i>
                  <span class="text-xs bg-webropol-gray-100 text-webropol-gray-700 px-2 py-1 rounded-full font-medium">Total</span>
                </div>
                <div class="text-3xl font-bold text-webropol-gray-900" x-text="employeeStats.reports"></div>
                <div class="text-sm text-webropol-gray-600">Reports</div>
              </div>

              <!-- Responses -->
              <div class="bg-white rounded-xl p-5 border border-webropol-gray-200 shadow-soft">
                <div class="flex items-center justify-between mb-2">
                  <i class="fal fa-chart-line text-2xl text-webropol-green-700"></i>
                  <span class="text-xs bg-webropol-green-100 text-webropol-green-700 px-2 py-1 rounded-full font-medium">Active</span>
                </div>
                <div class="text-3xl font-bold text-webropol-gray-900" x-text="employeeStats.responses.toLocaleString()"></div>
                <div class="text-sm text-webropol-gray-600">Responses</div>
              </div>

              <!-- Contributors -->
              <div class="bg-white rounded-xl p-5 border border-webropol-gray-200 shadow-soft">
                <div class="flex items-center justify-between mb-2">
                  <i class="fal fa-users text-2xl text-webropol-royalViolet-600"></i>
                  <span class="text-xs bg-webropol-gray-100 text-webropol-gray-700 px-2 py-1 rounded-full font-medium">Users</span>
                </div>
                <div class="text-3xl font-bold text-webropol-gray-900" x-text="employeeStats.contributors"></div>
                <div class="text-sm text-webropol-gray-600">Contributors</div>
              </div>

              <!-- Today -->
              <div class="bg-white rounded-xl p-5 border border-webropol-gray-200 shadow-soft">
                <div class="flex items-center justify-between mb-2">
                  <i class="fal fa-clock text-2xl text-webropol-royalBlue-600"></i>
                  <span class="text-xs bg-webropol-gray-100 text-webropol-gray-700 px-2 py-1 rounded-full font-medium">Recent</span>
                </div>
                <div class="text-3xl font-bold text-webropol-gray-900" x-text="employeeStats.today"></div>
                <div class="text-sm text-webropol-gray-600">Today</div>
              </div>
            </div>

            <!-- Webropol Logo Loading Animation -->
          </div>

          <!-- 360 Evaluations: sub-tabs -->
          <div 
            x-show="activeTab === '360-evaluations'"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 -translate-y-2"
            x-transition:enter-end="opacity-100 translate-y-0"
            class="mb-6">

            <!-- Sub tabs (same design as Employee Experience) -->
            <div class="flex items-center gap-4 mb-4">
              <button 
                @click="threesixtyTab = 'evaluations'"
                :class="threesixtyTab === 'evaluations' ? 'bg-webropol-primary-100 text-webropol-gray-900' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                class="px-4 py-2 rounded-lg transition-all flex items-center gap-2">
                <i class="fal fa-360-degrees"></i>
                <span>360 Evaluations</span>
              </button>
              <button 
                @click="threesixtyTab = 'followup'"
                :class="threesixtyTab === 'followup' ? 'bg-webropol-primary-100 text-webropol-gray-900' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                class="px-4 py-2 rounded-lg transition-all flex items-center gap-2">
                <i class="fal fa-clipboard-check"></i>
                <span>Followup</span>
              </button>
            </div>

            <!-- Info note -->
            <p class="text-sm text-webropol-gray-600 mb-3">Click 360 survey name to see detailed information of evaluations statuses</p>

            <!-- Evaluations table -->
            <div x-show="threesixtyTab === 'evaluations'" class="bg-white rounded-2xl shadow-soft border border-webropol-gray-200 overflow-hidden">
              <div class="overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-webropol-gray-50/50 border-b-2 border-webropol-primary-200">
                    <tr>
                      <th class="px-6 py-4 text-left text-sm font-semibold text-webropol-gray-700">360 survey name <i class="fal fa-sort text-xs opacity-50 ml-1 align-middle"></i></th>
                      <th class="px-6 py-4 text-left text-sm font-semibold text-webropol-gray-700">Evaluations completed</th>
                      <th class="px-6 py-4 text-left text-sm font-semibold text-webropol-gray-700">Survey status <i class="fal fa-sort text-xs opacity-50 ml-1 align-middle"></i></th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-webropol-gray-100">
                    <template x-for="row in evaluations360" :key="row.id">
                      <tr class="hover:bg-webropol-primary-50/30 transition-colors">
                        <td class="px-6 py-3">
                          <a href="#" class="text-webropol-primary-600 hover:text-webropol-primary-700 font-medium" x-text="row.name"></a>
                        </td>
                        <td class="px-6 py-3 text-webropol-gray-700" x-text="`${row.completed}/${row.total} completed`"></td>
                        <td class="px-6 py-3">
                          <span class="text-webropol-green-700" x-text="row.status"></span>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Followup placeholder -->
            <div x-show="threesixtyTab === 'followup'" class="bg-white rounded-2xl shadow-soft border border-webropol-gray-200 p-6">
              <p class="text-webropol-gray-700">Followup content will appear here.</p>
            </div>
          </div>

          <!-- Dashboards: header, settings and content -->
          <div 
            x-show="activeTab === 'dashboards'"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 -translate-y-2"
            x-transition:enter-end="opacity-100 translate-y-0"
            class="mb-6">

            <!-- Top row: breadcrumbs + settings -->
            <div class="flex items-center justify-between mb-3">
              <!-- Breadcrumbs -->
              <div class="text-sm text-webropol-gray-600 flex items-center gap-2">
                <template x-for="(crumb, idx) in currentDashboard.breadcrumbs" :key="idx">
                  <div class="flex items-center gap-2">
                    <a href="#" class="hover:text-webropol-primary-700 font-medium" x-text="crumb"></a>
                    <i class="fal fa-chevron-right text-xs opacity-60" x-show="idx < currentDashboard.breadcrumbs.length - 1"></i>
                  </div>
                </template>
              </div>

              <!-- Settings dropdown -->
              <div class="relative" x-data="{ open:false, _onScroll:null,
                    openSettings() { this.open = true; this.$nextTick(() => { const btn = this.$refs.settingsBtn; const menu = this.$refs.settingsMenu; if(!menu||!btn) return; if(!this.$refs.settingsPlaceholder) { const ph = document.createElement('div'); ph.style.display='none'; this.$el.appendChild(ph); this.$refs.settingsPlaceholder = ph; } if(menu.parentElement !== document.body) document.body.appendChild(menu); menu.style.position='fixed'; menu.style.zIndex='9999'; this.reposition(btn); this._onScroll = () => this.reposition(btn); window.addEventListener('scroll', this._onScroll, true); window.addEventListener('resize', this._onScroll); }); },
                    closeSettings() { this.open = false; const menu = this.$refs.settingsMenu; if(menu && this.$refs.settingsPlaceholder && menu.parentElement === document.body) { this.$refs.settingsPlaceholder.appendChild(menu); menu.style.position=''; menu.style.top=''; menu.style.left=''; menu.style.zIndex=''; } if(this._onScroll) { window.removeEventListener('scroll', this._onScroll, true); window.removeEventListener('resize', this._onScroll); this._onScroll = null; } },
                    reposition(btn) { const menu = this.$refs.settingsMenu; if(!menu||!btn) return; const rect = btn.getBoundingClientRect(); menu.style.maxWidth = (window.innerWidth - 20) + 'px'; const width = menu.offsetWidth || 288; let top = rect.bottom + 8; let left = Math.max(10, rect.right - width); if(left + width > window.innerWidth - 10) left = window.innerWidth - width - 10; if(left < 10) left = 10; if(top + menu.offsetHeight > window.innerHeight - 10) { top = rect.top - menu.offsetHeight - 8; if(top < 10) top = 10; } menu.style.top = top + 'px'; menu.style.left = left + 'px'; }
                  }">
                <button x-ref="settingsBtn" @click="open ? closeSettings() : openSettings()" class="flex items-center gap-2 px-3 py-2 bg-white border border-webropol-gray-300 rounded-lg hover:bg-webropol-gray-50 text-webropol-gray-700">
                  <i class="fal fa-cog"></i>
                  <span class="hidden sm:inline">Settings</span>
                  <i class="fal fa-chevron-down text-xs" :class="open && 'rotate-180'"></i>
                </button>
                <div x-ref="settingsPlaceholder" style="display:none"></div>
                <div x-ref="settingsMenu" x-show="open" @click.away="closeSettings()" class="w-72 bg-white rounded-xl shadow-medium border border-webropol-gray-200 py-2" style="display:none;">
                  <button @click="editDashboard(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-pen text-webropol-gray-600"></i>
                    <span>Edit dashboard</span>
                  </button>
                  <button @click="setDefaultDashboard(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-star text-webropol-gray-600"></i>
                    <span>Set dashboard as default home page</span>
                  </button>
                  <button @click="editUserRights(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-user-cog text-webropol-gray-600"></i>
                    <span>Edit user rights</span>
                  </button>
                  <div class="border-t border-webropol-gray-200 my-2"></div>
                  <button @click="shareWithViewUsers(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-share-alt text-webropol-gray-600"></i>
                    <span>Share dashboard with BI VIEW users</span>
                  </button>
                  <button @click="viewDashboardLinks(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-link text-webropol-gray-600"></i>
                    <span>VIEW dashboard links</span>
                  </button>
                  <button @click="inviteBiViewUsers(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-envelope-open-text text-webropol-gray-600"></i>
                    <span>Invite new BI VIEW users</span>
                  </button>
                  <div class="border-t border-webropol-gray-200 my-2"></div>
                  <button @click="exportPDF(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-file-pdf text-webropol-red-500"></i>
                    <span>Export to PDF</span>
                  </button>
                  <button @click="exportWord(); open=false" class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 text-left">
                    <i class="fal fa-file-word text-webropol-royalBlue-600"></i>
                    <span>Export to MS Word</span>
                  </button>
                </div>
              </div>
            </div>

            <!-- Dashboard title -->
            <h2 class="text-2xl font-bold text-webropol-gray-900 mb-3" x-text="currentDashboard.title"></h2>

            <!-- Main dashboard container with filter -->
            <div class="flex gap-6">
              <!-- Main chart area -->
              <div class="flex-1 bg-white rounded-2xl shadow-soft border border-webropol-gray-200 overflow-hidden">
                <!-- time filter bar -->
                <div class="px-6 py-4 bg-white border-b-2 border-webropol-gray-200 flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-webropol-primary-100 rounded-xl flex items-center justify-center">
                      <i class="fal fa-calendar text-webropol-primary-600"></i>
                    </div>
                    <span class="text-lg font-bold text-webropol-gray-900">Time Filter</span>
                  </div>
                  <button @click="dashboardFiltersOpen = !dashboardFiltersOpen" class="px-4 py-2 bg-webropol-primary-500 hover:bg-webropol-primary-600 text-white rounded-lg transition-all flex items-center gap-2 font-medium shadow-sm">
                    <i class="fal fa-sliders-h text-sm"></i>
                    <span class="hidden sm:inline">Configure Filters</span>
                  </button>
                </div>
                <div class="p-6">
                  <!-- Question title -->
                  <h3 class="text-lg font-bold text-webropol-gray-900 mb-1">Kuinka todennäköisesti suosittelisit hotelliamme ystävillesi ja tutuille?</h3>
                  <p class="text-sm text-webropol-gray-600 mb-4">Vastaajien määrä: <span x-text="dashboardData.totalResponses"></span></p>
                  
                  <!-- Main NPS bar with grid -->
                  <div class="relative mb-6">
                    <!-- Grid lines background -->
                    <div class="absolute inset-0 flex" style="z-index:0;">
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1 border-r border-webropol-gray-200"></div>
                      <div class="flex-1"></div>
                    </div>
                    
                    <!-- Stacked bar -->
                    <div class="relative flex h-24 rounded overflow-hidden border border-webropol-gray-300" style="z-index:1;">
                      <div class="bg-[#d9534f] flex items-center justify-center text-white font-semibold" :style="`width:${dashboardData.detractors.percent}%`">
                        <div class="text-center">
                          <div x-text="`${dashboardData.detractors.percent}%`" class="text-lg"></div>
                          <div class="text-xs" x-text="`n = ${dashboardData.detractors.count}`"></div>
                        </div>
                      </div>
                      <div class="bg-[#f0ad4e] flex items-center justify-center text-white font-semibold" :style="`width:${dashboardData.passives.percent}%`">
                        <div class="text-center">
                          <div x-text="`${dashboardData.passives.percent}%`" class="text-lg"></div>
                          <div class="text-xs" x-text="`n = ${dashboardData.passives.count}`"></div>
                        </div>
                      </div>
                      <div class="bg-[#5cb85c] flex items-center justify-center text-white font-semibold" :style="`width:${dashboardData.promoters.percent}%`">
                        <div class="text-center">
                          <div x-text="`${dashboardData.promoters.percent}%`" class="text-lg"></div>
                          <div class="text-xs" x-text="`n = ${dashboardData.promoters.count}`"></div>
                        </div>
                      </div>
                    </div>
                    
                    <!-- NPS Score badge -->
                    <div class="absolute -right-12 top-1/2 -translate-y-1/2 text-2xl font-bold text-webropol-gray-900" x-text="dashboardData.npsScore"></div>
                  </div>

                  <!-- Legend -->
                  <div class="flex items-center justify-center gap-8 mb-6 text-sm text-webropol-gray-700">
                    <div class="flex items-center gap-2">
                      <span class="font-medium">Arvostelijat</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="text-xs bg-webropol-gray-100 px-2 py-1 rounded">NPS</span>
                      <span class="font-medium">Passiviset</span>
                    </div>
                    <div class="flex items-center gap-2">
                      <span class="font-medium">Suosittelijat</span>
                    </div>
                  </div>

                  <!-- Detailed breakdown table -->
                  <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                      <thead>
                        <tr class="border-b-2 border-webropol-gray-300">
                          <th class="bg-[#d9534f] text-white px-3 py-2 font-semibold" colspan="7">Arvostelijat</th>
                          <th class="bg-[#f0ad4e] text-white px-3 py-2 font-semibold" colspan="2">Passiviset</th>
                          <th class="bg-[#5cb85c] text-white px-3 py-2 font-semibold" colspan="2">Suosittelijat</th>
                        </tr>
                        <tr class="bg-webropol-gray-50">
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'0'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'1'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'2'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'3'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'4'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'5'"></td>
                          <td class="px-2 py-2 text-center bg-red-100 border-r" x-text="'6'"></td>
                          <td class="px-2 py-2 text-center bg-yellow-100 border-r" x-text="'7'"></td>
                          <td class="px-2 py-2 text-center bg-yellow-100 border-r" x-text="'8'"></td>
                          <td class="px-2 py-2 text-center bg-green-100 border-r" x-text="'9'"></td>
                          <td class="px-2 py-2 text-center bg-green-100" x-text="'10'"></td>
                        </tr>
                      </thead>
                      <tbody>
                        <tr class="border-b bg-red-50">
                          <td colspan="7" class="px-3 py-2 text-center font-semibold" x-text="`n = ${dashboardData.detractors.count}`"></td>
                          <td colspan="2" class="px-3 py-2 text-center font-semibold bg-yellow-50" x-text="`n = ${dashboardData.passives.count}`"></td>
                          <td colspan="2" class="px-3 py-2 text-center font-semibold bg-green-50" x-text="`n = ${dashboardData.promoters.count}`"></td>
                        </tr>
                        <tr class="border-b bg-red-50">
                          <td colspan="7" class="px-3 py-2 text-center font-semibold" x-text="`${dashboardData.detractors.percent}%`"></td>
                          <td colspan="2" class="px-3 py-2 text-center font-semibold bg-yellow-50" x-text="`${dashboardData.passives.percent}%`"></td>
                          <td colspan="2" class="px-3 py-2 text-center font-semibold bg-green-50" x-text="`${dashboardData.promoters.percent}%`"></td>
                        </tr>
                        <tr class="bg-red-100">
                          <template x-for="(val, idx) in dashboardData.breakdown" :key="idx">
                            <td class="px-2 py-2 text-center border-r last:border-r-0" 
                                :class="idx < 7 ? 'bg-red-100' : idx < 9 ? 'bg-yellow-100' : 'bg-green-100'"
                                x-text="val.count"></td>
                          </template>
                        </tr>
                        <tr class="bg-red-50">
                          <template x-for="(val, idx) in dashboardData.breakdown" :key="idx">
                            <td class="px-2 py-2 text-center border-r last:border-r-0 text-sm" 
                                :class="idx < 7 ? 'bg-red-50' : idx < 9 ? 'bg-yellow-50' : 'bg-green-50'"
                                x-text="`${val.percent}%`"></td>
                          </template>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <!-- Summary section -->
                  <div class="mt-6 border-t pt-4">
                    <h4 class="font-semibold text-webropol-gray-900 mb-3 text-center">Yhteensä</h4>
                    <div class="grid grid-cols-3 gap-4 text-center">
                      <div>
                        <div class="font-bold text-webropol-gray-900">Vastauksia</div>
                        <div class="text-2xl font-bold text-webropol-gray-900" x-text="dashboardData.totalResponses"></div>
                      </div>
                      <div>
                        <div class="font-bold text-webropol-gray-900">NPS</div>
                        <div class="text-2xl font-bold text-webropol-gray-900" x-text="dashboardData.npsScore"></div>
                      </div>
                      <div>
                        <div class="font-bold text-webropol-gray-900">Keskiarvo</div>
                        <div class="text-2xl font-bold text-webropol-gray-900" x-text="dashboardData.average"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Filter panel -->
              <div x-show="dashboardFiltersOpen" 
                   x-transition:enter="transition ease-out duration-200"
                   x-transition:enter-start="opacity-0 translate-x-4"
                   x-transition:enter-end="opacity-100 translate-x-0"
                   class="w-96 bg-white rounded-2xl shadow-soft border border-webropol-gray-200 p-6 h-fit">
                <h3 class="text-lg font-bold text-webropol-gray-900 mb-4">Date and time filter</h3>

                <!-- Date range -->
                <div class="mb-6">
                  <div class="flex items-center gap-2 mb-3">
                    <i class="fal fa-calendar text-webropol-primary-600 text-lg"></i>
                    <span class="font-semibold text-webropol-gray-900">Date range</span>
                  </div>
                  <select x-model="dashboardFilters.dateRange" class="w-full px-3 py-2 border border-webropol-gray-300 rounded-lg focus:ring-2 focus:ring-webropol-primary-500 outline-none">
                    <option value="all">All</option>
                    <option value="today">Today</option>
                    <option value="yesterday">Yesterday</option>
                    <option value="last7days">Last 7 days</option>
                    <option value="last30days">Last 30 days</option>
                    <option value="thisMonth">This month</option>
                    <option value="lastMonth">Last month</option>
                    <option value="custom">Custom range</option>
                  </select>
                </div>

                <!-- Time range -->
                <div class="mb-6">
                  <div class="flex items-center gap-2 mb-3">
                    <i class="fal fa-clock text-webropol-primary-600 text-lg"></i>
                    <span class="font-semibold text-webropol-gray-900">Time range</span>
                  </div>
                  <p class="text-sm text-webropol-gray-600 mb-2">Show only reponses between (hh:mm)</p>
                  <div class="flex items-center gap-2">
                    <input type="time" x-model="dashboardFilters.timeStart" class="flex-1 px-3 py-2 border border-webropol-gray-300 rounded-lg focus:ring-2 focus:ring-webropol-primary-500 outline-none text-sm">
                    <span class="text-webropol-gray-500">–</span>
                    <input type="time" x-model="dashboardFilters.timeEnd" class="flex-1 px-3 py-2 border border-webropol-gray-300 rounded-lg focus:ring-2 focus:ring-webropol-primary-500 outline-none text-sm">
                    <button @click="clearTimeRange()" class="p-2 text-webropol-gray-500 hover:text-webropol-red-600">
                      <i class="fal fa-trash"></i>
                    </button>
                  </div>
                </div>

                <!-- Timeline -->
                <div class="mb-6">
                  <div class="flex items-center gap-2 mb-3">
                    <i class="fal fa-chart-line text-webropol-primary-600 text-lg"></i>
                    <span class="font-semibold text-webropol-gray-900">Timeline</span>
                  </div>
                  <div class="flex items-center gap-2 mb-2">
                    <input type="checkbox" x-model="dashboardFilters.viewTimeline" id="timelineCheck" class="rounded border-webropol-gray-300">
                    <label for="timelineCheck" class="text-sm text-webropol-gray-700">View results on a timeline</label>
                  </div>
                  <select x-model="dashboardFilters.timelineInterval" :disabled="!dashboardFilters.viewTimeline" class="w-full px-3 py-2 border border-webropol-gray-300 rounded-lg focus:ring-2 focus:ring-webropol-primary-500 outline-none">
                    <option value="hourly">Hourly</option>
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                  </select>
                </div>

                <!-- Action buttons -->
                <div class="flex items-center gap-3">
                  <button @click="applyDashboardFilters()" class="flex-1 px-4 py-2 bg-[#d35400] hover:bg-[#ba4a00] text-white rounded-lg font-medium transition-all">
                    Apply
                  </button>
                  <button @click="resetDashboardFilters()" class="px-4 py-2 bg-webropol-gray-200 hover:bg-webropol-gray-300 text-webropol-gray-700 rounded-lg font-medium transition-all">
                    Reset to default
                  </button>
                  <button @click="dashboardFiltersOpen = false" class="px-4 py-2 bg-webropol-gray-100 hover:bg-webropol-gray-200 text-webropol-gray-700 rounded-lg font-medium transition-all">
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Admin Tools: Modern redesigned section -->
          <div 
            x-show="activeTab === 'admin-tools'"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 -translate-y-2"
            x-transition:enter-end="opacity-100 translate-y-0"
            class="space-y-6">

            <!-- Navigation Tabs -->
            <div class="bg-white rounded-2xl shadow-soft border border-webropol-gray-200 p-2" x-data="{ moreMenuOpen: false }">
              <div class="flex gap-2">
                <!-- Visible tabs - show on larger screens -->
                <button @click="adminTab = 'user-management'" 
                        :class="adminTab === 'user-management' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="px-4 py-2.5 rounded-xl font-semibold text-sm transition-all flex items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-users-cog"></i>
                  <span>User Management</span>
                </button>
                
                <button @click="adminTab = 'organisation-management'" 
                        :class="adminTab === 'organisation-management' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden sm:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-building"></i>
                  <span>Organisation Management</span>
                </button>
                
                <button @click="adminTab = 'administrators'" 
                        :class="adminTab === 'administrators' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden md:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-user-shield"></i>
                  <span>Administrators</span>
                </button>
                
                <button @click="adminTab = 'user-groups'" 
                        :class="adminTab === 'user-groups' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden lg:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-users"></i>
                  <span>User Groups</span>
                </button>
                
                <button @click="adminTab = 'report-rights'" 
                        :class="adminTab === 'report-rights' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden xl:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-file-chart-line"></i>
                  <span>Report Rights</span>
                </button>
                
                <button @click="adminTab = 'dashboard-rights'" 
                        :class="adminTab === 'dashboard-rights' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden xl:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-tachometer-alt-fast"></i>
                  <span>Dashboard Rights</span>
                </button>
                
                <button @click="adminTab = 'manage-excel-files'" 
                        :class="adminTab === 'manage-excel-files' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden 2xl:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-file-excel"></i>
                  <span>Manage Excel Files</span>
                </button>
                
                <button @click="adminTab = 'image-gallery'" 
                        :class="adminTab === 'image-gallery' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden 2xl:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-images"></i>
                  <span>Image Gallery</span>
                </button>
                
                <button @click="adminTab = 'logs'" 
                        :class="adminTab === 'logs' ? 'bg-webropol-primary-500 text-white shadow-sm' : 'text-webropol-gray-700 hover:bg-webropol-gray-100'"
                        class="hidden 2xl:flex px-4 py-2.5 rounded-xl font-semibold text-sm transition-all items-center gap-2 whitespace-nowrap">
                  <i class="fal fa-clipboard-list"></i>
                  <span>Logs</span>
                </button>
                
                <!-- More dropdown button - hidden on 2xl and larger screens -->
                <div class="relative ml-auto 2xl:hidden" x-data="{ moreMenuOpen: false, _onScroll:null,
                      openMore() { this.moreMenuOpen = true; this.$nextTick(() => { const btn = this.$refs.moreBtn; const menu = this.$refs.moreMenu; if(!menu||!btn) return; if(!this.$refs.morePlaceholder) { const ph = document.createElement('div'); ph.style.display='none'; this.$el.appendChild(ph); this.$refs.morePlaceholder = ph; } if(menu.parentElement !== document.body) document.body.appendChild(menu); menu.style.position='fixed'; menu.style.zIndex='9999'; this.reposition(btn); this._onScroll = () => this.reposition(btn); window.addEventListener('scroll', this._onScroll, true); window.addEventListener('resize', this._onScroll);}); },
                      closeMore() { this.moreMenuOpen = false; const menu = this.$refs.moreMenu; if(menu && this.$refs.morePlaceholder && menu.parentElement === document.body) { this.$refs.morePlaceholder.appendChild(menu); menu.style.position=''; menu.style.top=''; menu.style.left=''; menu.style.zIndex=''; } if(this._onScroll) { window.removeEventListener('scroll', this._onScroll, true); window.removeEventListener('resize', this._onScroll); this._onScroll = null; } },
                      reposition(btn) { const menu = this.$refs.moreMenu; if(!menu||!btn) return; const rect = btn.getBoundingClientRect(); menu.style.maxWidth = (window.innerWidth - 20) + 'px'; const width = menu.offsetWidth || 256; let top = rect.bottom + 8; let left = Math.max(10, rect.right - width); if(left + width > window.innerWidth - 10) left = window.innerWidth - width - 10; if(left < 10) left = 10; if(top + menu.offsetHeight > window.innerHeight - 10) { top = rect.top - menu.offsetHeight - 8; if(top < 10) top = 10; } menu.style.top = top + 'px'; menu.style.left = left + 'px'; }
                  }">
                  <button x-ref="moreBtn" @click="moreMenuOpen ? closeMore() : openMore()"
                          class="px-4 py-2.5 rounded-xl font-semibold text-sm transition-all flex items-center gap-2 whitespace-nowrap text-webropol-gray-700 hover:bg-webropol-gray-100">
                    <i class="fal fa-ellipsis-h"></i>
                    <span class="hidden sm:inline">More</span>
                    <i class="fal fa-chevron-down text-xs transition-transform" :class="moreMenuOpen && 'rotate-180'"></i>
                  </button>
                  
                  <!-- Dropdown menu -->
                     <div x-ref="morePlaceholder" style="display:none"></div>
                     <div x-ref="moreMenu" x-show="moreMenuOpen"
                       @click.away="closeMore()"
                       x-transition:enter="transition ease-out duration-200"
                       x-transition:enter-start="opacity-0 transform scale-95"
                       x-transition:enter-end="opacity-100 transform scale-100"
                       x-transition:leave="transition ease-in duration-150"
                       x-transition:leave-start="opacity-100 transform scale-100"
                       x-transition:leave-end="opacity-0 transform scale-95"
                       class="w-64 bg-white rounded-xl shadow-medium border border-webropol-gray-200 py-2"
                       style="display: none;">
                    
                    <!-- Show on small screens (< sm) -->
                    <button @click="adminTab = 'organisation-management'; moreMenuOpen = false"
                            :class="adminTab === 'organisation-management' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="sm:hidden w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-building"></i>
                      <span>Organisation Management</span>
                    </button>
                    
                    <!-- Show on small-medium screens (< md) -->
                    <button @click="adminTab = 'administrators'; moreMenuOpen = false"
                            :class="adminTab === 'administrators' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="md:hidden w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-user-shield"></i>
                      <span>Administrators</span>
                    </button>
                    
                    <!-- Show on medium screens (< lg) -->
                    <button @click="adminTab = 'user-groups'; moreMenuOpen = false"
                            :class="adminTab === 'user-groups' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="lg:hidden w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-users"></i>
                      <span>User Groups</span>
                    </button>
                    
                    <!-- Show on large screens (< xl) -->
                    <button @click="adminTab = 'report-rights'; moreMenuOpen = false"
                            :class="adminTab === 'report-rights' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="xl:hidden w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-file-chart-line"></i>
                      <span>Report Rights</span>
                    </button>
                    
                    <!-- Show on extra large screens (< 2xl) -->
                    <button @click="adminTab = 'dashboard-rights'; moreMenuOpen = false"
                            :class="adminTab === 'dashboard-rights' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="xl:hidden w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-tachometer-alt-fast"></i>
                      <span>Dashboard Rights</span>
                    </button>
                    
                    <!-- Always in dropdown on screens < 2xl -->
                    <button @click="adminTab = 'manage-excel-files'; moreMenuOpen = false"
                            :class="adminTab === 'manage-excel-files' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-file-excel"></i>
                      <span>Manage Excel Files</span>
                    </button>
                    
                    <button @click="adminTab = 'image-gallery'; moreMenuOpen = false"
                            :class="adminTab === 'image-gallery' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-images"></i>
                      <span>Image Gallery</span>
                    </button>
                    
                    <button @click="adminTab = 'logs'; moreMenuOpen = false"
                            :class="adminTab === 'logs' ? 'bg-webropol-primary-50 text-webropol-primary-700' : 'text-webropol-gray-700'"
                            class="w-full flex items-center gap-3 px-4 py-3 hover:bg-webropol-gray-50 transition-colors text-left">
                      <i class="fal fa-clipboard-list"></i>
                      <span>Logs</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- User Management content -->
            <div x-show="adminTab === 'user-management'" 
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 class="bg-white rounded-2xl shadow-medium border border-webropol-gray-200 overflow-hidden">
              
              <!-- Header with actions -->
              <div class="px-6 py-5 bg-gradient-to-r from-webropol-primary-50 to-white border-b border-webropol-gray-200">
                <div class="flex items-center justify-between mb-4">
                  <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-webropol-primary-100 rounded-lg flex items-center justify-center">
                      <i class="fal fa-users-cog text-webropol-primary-600"></i>
                    </div>
                    <div>
                      <h3 class="text-xl font-bold text-webropol-gray-900">User Management</h3>
                      <p class="text-sm text-webropol-gray-600">Create and manage BI VIEW users</p>
                    </div>
                  </div>
                </div>

                <!-- Action buttons - Modern design with card-style options -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <!-- Create Single User - Primary Action -->
                  <button class="group relative bg-gradient-to-br from-webropol-primary-500 to-webropol-primary-600 hover:from-webropol-primary-600 hover:to-webropol-primary-700 text-white rounded-2xl p-4 transition-all shadow-md hover:shadow-lg overflow-hidden">
                    <div class="absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10 group-hover:scale-150 transition-transform duration-300"></div>
                    <div class="relative flex items-center gap-3">
                      <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform">
                        <i class="fal fa-user-plus text-2xl"></i>
                      </div>
                      <div class="text-left flex-1">
                        <div class="font-bold text-base mb-0.5">Create User</div>
                        <div class="text-xs text-white/80">Add new individual user</div>
                      </div>
                      <i class="fal fa-plus text-lg opacity-60 group-hover:opacity-100 group-hover:scale-110 transition-all"></i>
                    </div>
                  </button>

                  <!-- Bulk Create - Secondary Action -->
                  <button class="group relative bg-white hover:bg-webropol-gray-50 border-2 border-webropol-gray-200 hover:border-webropol-primary-300 rounded-2xl p-4 transition-all shadow-sm hover:shadow-md overflow-hidden">
                    <div class="absolute top-0 right-0 w-20 h-20 bg-webropol-primary-50 rounded-full -mr-10 -mt-10 opacity-0 group-hover:opacity-100 group-hover:scale-150 transition-all duration-300"></div>
                    <div class="relative flex items-center gap-3">
                      <div class="w-12 h-12 bg-webropol-royalViolet-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform">
                        <i class="fal fa-user-friends text-2xl text-webropol-royalViolet-600"></i>
                      </div>
                      <div class="text-left flex-1">
                        <div class="font-bold text-base text-webropol-gray-900 mb-0.5">Create Multiple Users</div>
                        <div class="text-xs text-webropol-gray-600">Paste or import from an Excel file</div>
                      </div>
                      <i class="fal fa-plus text-lg text-webropol-gray-400 group-hover:text-webropol-royalViolet-600 group-hover:scale-110 transition-all"></i>
                    </div>
                  </button>

                  <!-- Hierarchy Based - Advanced Option -->
                  <button class="group relative bg-white hover:bg-webropol-gray-50 border-2 border-webropol-gray-200 hover:border-webropol-royalBlue-300 rounded-2xl p-4 transition-all shadow-sm hover:shadow-md overflow-hidden">
                    <div class="absolute top-0 right-0 w-20 h-20 bg-webropol-royalBlue-50 rounded-full -mr-10 -mt-10 opacity-0 group-hover:opacity-100 group-hover:scale-150 transition-all duration-300"></div>
                    <div class="relative flex items-center gap-3">
                      <div class="w-12 h-12 bg-webropol-royalBlue-100 rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform">
                        <i class="fal fa-sitemap text-2xl text-webropol-royalBlue-600"></i>
                      </div>
                      <div class="text-left flex-1">
                        <div class="font-bold text-base text-webropol-gray-900 mb-0.5">Create from Hierarchy</div>
                        <div class="text-xs text-webropol-gray-600">Sync from org structure</div>
                      </div>
                      <i class="fal fa-plus text-lg text-webropol-gray-400 group-hover:text-webropol-royalBlue-600 group-hover:scale-110 transition-all"></i>
                    </div>
                  </button>
                </div>
              </div>

              <!-- Sub tabs with modern design -->
              <div class="px-6 py-4 bg-webropol-gray-50/50 border-b border-webropol-gray-200">
                <div class="flex gap-2">
                  <button @click="userMgmtTab = 'webropol-biview'" 
                          :class="userMgmtTab === 'webropol-biview' ? 'bg-white text-webropol-primary-700 shadow-sm border-webropol-primary-200' : 'text-webropol-gray-600 hover:bg-white/50 border-transparent'"
                          class="px-4 py-2.5 rounded-xl text-sm font-semibold transition-all border-2 flex items-center gap-2">
                    <i class="fal fa-users"></i>
                    <span>Active Users</span>
                    <span class="ml-1 px-2 py-0.5 bg-webropol-green-100 text-webropol-green-700 rounded-full text-xs font-bold">3</span>
                  </button>
                  <button @click="userMgmtTab = 'not-activated'" 
                          :class="userMgmtTab === 'not-activated' ? 'bg-white text-webropol-primary-700 shadow-sm border-webropol-primary-200' : 'text-webropol-gray-600 hover:bg-white/50 border-transparent'"
                          class="px-4 py-2.5 rounded-xl text-sm font-semibold transition-all border-2 flex items-center gap-2">
                    <i class="fal fa-user-clock"></i>
                    <span>Not Activated</span>
                    <span class="ml-1 px-2 py-0.5 bg-webropol-gray-200 text-webropol-gray-700 rounded-full text-xs font-bold">0</span>
                  </button>
                  <button @click="userMgmtTab = 'pending-approval'" 
                          :class="userMgmtTab === 'pending-approval' ? 'bg-white text-webropol-primary-700 shadow-sm border-webropol-primary-200' : 'text-webropol-gray-600 hover:bg-white/50 border-transparent'"
                          class="px-4 py-2.5 rounded-xl text-sm font-semibold transition-all border-2 flex items-center gap-2">
                    <i class="fal fa-hourglass-half"></i>
                    <span>Pending</span>
                    <span class="ml-1 px-2 py-0.5 bg-webropol-red-100 text-webropol-red-700 rounded-full text-xs font-bold">2</span>
                  </button>
                </div>
              </div>

              <!-- Advanced Search Bar -->
              <div class="px-6 py-4 bg-white border-b border-webropol-gray-200">
                <div class="flex flex-wrap items-center gap-3">
                  <div class="relative flex-1 min-w-[300px]">
                    <i class="fal fa-search absolute left-4 top-1/2 -translate-y-1/2 text-webropol-gray-400"></i>
                    <input type="text" 
                           placeholder="Search users..." 
                           class="w-full pl-11 pr-4 py-3 border-2 border-webropol-gray-200 rounded-xl focus:ring-2 focus:ring-webropol-primary-500 focus:border-webropol-primary-500 outline-none transition-all">
                  </div>
                  <select class="px-4 py-3 border-2 border-webropol-gray-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-webropol-primary-500 outline-none">
                    <option>User name</option>
                    <option>Email</option>
                    <option>First name</option>
                    <option>Last name</option>
                  </select>
                  <select class="px-4 py-3 border-2 border-webropol-gray-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-webropol-primary-500 outline-none">
                    <option>Contains</option>
                    <option>Equals</option>
                    <option>Starts with</option>
                  </select>
                  <button class="px-5 py-3 bg-webropol-primary-500 hover:bg-webropol-primary-600 text-white rounded-xl font-semibold transition-all shadow-sm">
                    <i class="fal fa-search mr-2"></i>Search
                  </button>
                  <button class="px-5 py-3 bg-webropol-gray-100 hover:bg-webropol-gray-200 text-webropol-gray-700 rounded-xl font-semibold transition-all">
                    <i class="fal fa-redo mr-2"></i>Reset
                  </button>
                </div>
              </div>

              <!-- Users table with modern styling -->
              <div class="overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-gradient-to-r from-webropol-gray-50 to-webropol-primary-50/30">
                    <tr class="border-b-2 border-webropol-primary-200">
                      <th class="px-6 py-4 text-left">
                        <input type="checkbox" class="rounded-lg border-webropol-gray-300 text-webropol-primary-500 focus:ring-webropol-primary-500">
                      </th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">
                        <button class="flex items-center gap-2 hover:text-webropol-primary-600 transition-colors">
                          User name <i class="fal fa-sort text-xs"></i>
                        </button>
                      </th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">
                        <button class="flex items-center gap-2 hover:text-webropol-primary-600 transition-colors">
                          Email <i class="fal fa-sort text-xs"></i>
                        </button>
                      </th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">
                        <button class="flex items-center gap-2 hover:text-webropol-primary-600 transition-colors">
                          First name <i class="fal fa-sort text-xs"></i>
                        </button>
                      </th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">
                        <button class="flex items-center gap-2 hover:text-webropol-primary-600 transition-colors">
                          Last name <i class="fal fa-sort text-xs"></i>
                        </button>
                      </th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">User class</th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">BI VIEW class</th>
                      <th class="px-6 py-4 text-center text-sm font-bold text-webropol-gray-900">Status</th>
                      <th class="px-6 py-4 text-left text-sm font-bold text-webropol-gray-900">
                        <button class="flex items-center gap-2 hover:text-webropol-primary-600 transition-colors">
                          Last login <i class="fal fa-sort text-xs"></i>
                        </button>
                      </th>
                      <th class="px-6 py-4 text-center text-sm font-bold text-webropol-gray-900">Actions</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-webropol-gray-100">
                    <template x-for="user in adminUsers" :key="user.id">
                      <tr class="hover:bg-webropol-primary-50/20 transition-colors group">
                        <td class="px-6 py-4">
                          <input type="checkbox" class="rounded-lg border-webropol-gray-300 text-webropol-primary-500 focus:ring-webropol-primary-500">
                        </td>
                        <td class="px-6 py-4">
                          <div class="flex items-center gap-3">
                            <div class="w-9 h-9 bg-gradient-to-br from-webropol-primary-400 to-webropol-primary-600 rounded-lg flex items-center justify-center text-white font-bold text-sm">
                              <span x-text="user.username.substring(0, 2).toUpperCase()"></span>
                            </div>
                            <a href="#" class="text-webropol-primary-600 hover:text-webropol-primary-700 font-semibold" x-text="user.username"></a>
                          </div>
                        </td>
                        <td class="px-6 py-4">
                          <span class="text-sm text-webropol-gray-700 font-medium" x-text="user.email"></span>
                        </td>
                        <td class="px-6 py-4">
                          <span class="text-sm text-webropol-gray-700" x-text="user.firstName"></span>
                        </td>
                        <td class="px-6 py-4">
                          <span class="text-sm text-webropol-gray-700" x-text="user.lastName"></span>
                        </td>
                        <td class="px-6 py-4">
                          <span class="text-sm px-3 py-1 bg-webropol-gray-100 text-webropol-gray-700 rounded-full font-medium" x-text="user.userClass || 'N/A'"></span>
                        </td>
                        <td class="px-6 py-4">
                          <span class="text-sm px-3 py-1 bg-webropol-red-100 text-webropol-red-700 rounded-full font-semibold" x-text="user.biViewClass"></span>
                        </td>
                        <td class="px-6 py-4 text-center">
                          <div x-show="user.emailValidated" class="inline-flex items-center gap-1 px-3 py-1 bg-webropol-green-100 text-webropol-green-700 rounded-full text-xs font-semibold">
                            <i class="fal fa-check-circle"></i>
                            <span>Verified</span>
                          </div>
                        </td>
                        <td class="px-6 py-4">
                          <div class="flex items-center gap-2 text-sm text-webropol-gray-600">
                            <i class="fal fa-clock text-webropol-gray-400"></i>
                            <span x-text="user.lastLogin"></span>
                          </div>
                        </td>
                        <td class="px-6 py-4">
                          <div class="flex items-center justify-center gap-2" x-data="{ menuOpen: false, _onScroll: null,
                              openMenu() {
                                this.menuOpen = true;
                                this.$nextTick(() => {
                                  const btn = this.$refs.actionBtn;
                                  const menu = this.$refs.actionMenu;
                                  if(!menu || !btn) return;
                                  // ensure placeholder exists
                                  if(!this.$refs.menuPlaceholder) {
                                    const ph = document.createElement('div'); ph.style.display = 'none'; this.$el.appendChild(ph); this.$refs.menuPlaceholder = ph;
                                  }
                                  if(menu.parentElement !== document.body) document.body.appendChild(menu);
                                  menu.style.position = 'fixed';
                                  menu.style.zIndex = '9999';
                                  this.reposition(btn);
                                  this._onScroll = () => this.reposition(btn);
                                  window.addEventListener('scroll', this._onScroll, true);
                                  window.addEventListener('resize', this._onScroll);
                                });
                              },
                              closeMenu() {
                                this.menuOpen = false;
                                const menu = this.$refs.actionMenu;
                                if(menu && this.$refs.menuPlaceholder && menu.parentElement === document.body) {
                                  this.$refs.menuPlaceholder.appendChild(menu);
                                  menu.style.position = '';
                                  menu.style.top = '';
                                  menu.style.left = '';
                                  menu.style.zIndex = '';
                                }
                                if(this._onScroll) { window.removeEventListener('scroll', this._onScroll, true); window.removeEventListener('resize', this._onScroll); this._onScroll = null; }
                              },
                              reposition(btn) {
                                const menu = this.$refs.actionMenu; if(!menu || !btn) return;
                                const rect = btn.getBoundingClientRect(); menu.style.maxWidth = (window.innerWidth - 20) + 'px'; const width = menu.offsetWidth || 224;
                                let top = rect.bottom + 8; let left = rect.right - width;
                                if(left + width > window.innerWidth - 10) left = window.innerWidth - width - 10;
                                if(left < 10) left = 10;
                                if(top + menu.offsetHeight > window.innerHeight - 10) {
                                  top = rect.top - menu.offsetHeight - 8; if(top < 10) top = 10;
                                }
                                menu.style.top = top + 'px'; menu.style.left = left + 'px';
                              }
                            }">
                            <div>
                              <button x-ref="actionBtn"
                                @click="menuOpen ? closeMenu() : openMenu()"
                                class="p-2 text-webropol-gray-600 hover:bg-webropol-gray-100 rounded-lg transition-all" 
                                title="Actions">
                                <i class="fal fa-ellipsis-h"></i>
                              </button>
                              <div x-ref="menuPlaceholder" style="display:none"></div>
                              
                              <!-- Dropdown Menu - Appended to body and positioned to escape overflow -->
                              <div 
                                x-ref="actionMenu"
                                x-show="menuOpen"
                                @click.away="closeMenu()"
                                x-transition:enter="transition ease-out duration-200"
                                x-transition:enter-start="opacity-0 transform scale-95"
                                x-transition:enter-end="opacity-100 transform scale-100"
                                x-transition:leave="transition ease-in duration-150"
                                x-transition:leave-start="opacity-100 transform scale-100"
                                x-transition:leave-end="opacity-0 transform scale-95"
                                class="w-56 bg-white rounded-xl shadow-medium border border-webropol-gray-200 py-2"
                                style="display: none;">
                                
                                <button @click="menuOpen = false" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-webropol-gray-50 text-left transition-colors">
                                  <i class="fal fa-user-edit text-webropol-primary-600"></i>
                                  <span class="text-webropol-gray-700 text-sm">Edit user profile</span>
                                </button>
                                
                                <button @click="menuOpen = false" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-webropol-gray-50 text-left transition-colors">
                                  <i class="fal fa-shield-check text-webropol-royalBlue-600"></i>
                                  <span class="text-webropol-gray-700 text-sm">Edit user rights</span>
                                </button>
                                
                                <button @click="menuOpen = false" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-webropol-gray-50 text-left transition-colors">
                                  <i class="fal fa-key text-webropol-royalViolet-600"></i>
                                  <span class="text-webropol-gray-700 text-sm">Reset password</span>
                                </button>
                                
                                <button @click="menuOpen = false" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-webropol-gray-50 text-left transition-colors">
                                  <i class="fal fa-envelope text-webropol-gray-500"></i>
                                  <span class="text-webropol-gray-400 text-sm">Send email validation link</span>
                                </button>
                                
                                <div class="border-t border-webropol-gray-200 my-2"></div>
                                
                                <button @click="menuOpen = false" class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-webropol-red-50 text-left transition-colors group">
                                  <i class="fal fa-trash-alt text-webropol-red-600 group-hover:text-webropol-red-700"></i>
                                  <span class="text-webropol-red-600 text-sm font-medium group-hover:text-webropol-red-700">Delete</span>
                                </button>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </template>
                  </tbody>
                </table>
              </div>

              <!-- Pagination -->
              <div class="px-6 py-4 bg-webropol-gray-50/50 border-t border-webropol-gray-200 flex items-center justify-between">
                <div class="text-sm text-webropol-gray-600 font-medium">
                  Showing <span class="font-bold text-webropol-gray-900">1-3</span> of <span class="font-bold text-webropol-gray-900">3</span> users
                </div>
                <div class="flex items-center gap-2">
                  <button class="px-4 py-2 bg-white border-2 border-webropol-gray-200 rounded-lg text-sm font-semibold text-webropol-gray-600 hover:bg-webropol-gray-50 transition-all disabled:opacity-50" disabled>
                    <i class="fal fa-chevron-left mr-1"></i> Previous
                  </button>
                  <button class="w-10 h-10 bg-webropol-primary-500 text-white rounded-lg font-bold text-sm shadow-sm">1</button>
                  <button class="px-4 py-2 bg-white border-2 border-webropol-gray-200 rounded-lg text-sm font-semibold text-webropol-gray-600 hover:bg-webropol-gray-50 transition-all disabled:opacity-50" disabled>
                    Next <i class="fal fa-chevron-right ml-1"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Placeholder for other admin tabs -->
            <div x-show="adminTab !== 'user-management'" 
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 class="bg-white rounded-2xl shadow-medium border border-webropol-gray-200 p-8">
              
              <!-- Special animated loader for Image Gallery -->
              <div x-show="adminTab === 'image-gallery'" class="text-center py-12">
                <div class="relative w-48 h-48 mx-auto mb-8">
                  <!-- Soft floating bubbles background -->
                  <div class="absolute inset-0 overflow-hidden">
                    <div class="absolute w-16 h-16 bg-webropol-primary-200 rounded-full opacity-40 animate-pulse" style="top: 10%; left: 20%; animation-duration: 3s;"></div>
                    <div class="absolute w-20 h-20 bg-webropol-royalViolet-200 rounded-full opacity-30 animate-pulse" style="top: 60%; right: 15%; animation-duration: 4s; animation-delay: 1s;"></div>
                    <div class="absolute w-12 h-12 bg-webropol-royalBlue-200 rounded-full opacity-35 animate-pulse" style="bottom: 20%; left: 10%; animation-duration: 3.5s; animation-delay: 0.5s;"></div>
                    <div class="absolute w-14 h-14 bg-webropol-green-200 rounded-full opacity-30 animate-pulse" style="top: 30%; right: 25%; animation-duration: 4.5s; animation-delay: 1.5s;"></div>
                  </div>
                  
                  <!-- Gentle floating images -->
                  <div class="absolute inset-0 flex items-center justify-center">
                    <div class="relative w-full h-full">
                      <!-- Gentle up-down float -->
                      <div class="absolute top-4 left-1/2 -translate-x-1/2" style="animation: gentleFloat 3s ease-in-out infinite;">
                        <div class="w-12 h-12 bg-white rounded-lg shadow-soft flex items-center justify-center">
                          <i class="fal fa-image text-xl text-webropol-primary-500"></i>
                        </div>
                      </div>
                      
                      <!-- Gentle up-down float with delay -->
                      <div class="absolute bottom-4 left-1/2 -translate-x-1/2" style="animation: gentleFloat 3s ease-in-out infinite; animation-delay: 1s;">
                        <div class="w-12 h-12 bg-white rounded-lg shadow-soft flex items-center justify-center">
                          <i class="fal fa-camera text-xl text-webropol-royalViolet-500"></i>
                        </div>
                      </div>
                      
                      <!-- Gentle side float -->
                      <div class="absolute left-4 top-1/2 -translate-y-1/2" style="animation: gentleSideFloat 3.5s ease-in-out infinite;">
                        <div class="w-12 h-12 bg-white rounded-lg shadow-soft flex items-center justify-center">
                          <i class="fal fa-photo-video text-xl text-webropol-royalBlue-500"></i>
                        </div>
                      </div>
                      
                      <!-- Gentle side float with delay -->
                      <div class="absolute right-4 top-1/2 -translate-y-1/2" style="animation: gentleSideFloat 3.5s ease-in-out infinite; animation-delay: 1s;">
                        <div class="w-12 h-12 bg-white rounded-lg shadow-soft flex items-center justify-center">
                          <i class="fal fa-film text-xl text-webropol-green-500"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Center icon with gentle breathing -->
                  <div class="absolute inset-0 flex items-center justify-center">
                    <div class="w-20 h-20 bg-gradient-to-br from-webropol-primary-100 to-webropol-royalViolet-100 rounded-2xl flex items-center justify-center shadow-medium" style="animation: gentleBreath 4s ease-in-out infinite;">
                      <i class="fal fa-images text-3xl text-webropol-primary-600"></i>
                    </div>
                  </div>
                </div>
                
                <h3 class="text-2xl font-semibold text-webropol-gray-800 mb-3">
                  Setting up your gallery
                </h3>
                <p class="text-webropol-gray-500 mb-6 text-sm">Hang tight while we prepare everything for you</p>
                
                <!-- Loading circles -->
                <div class="flex justify-center gap-2">
                  <div class="w-3 h-3 bg-webropol-primary-500 rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                  <div class="w-3 h-3 bg-webropol-royalBlue-500 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                  <div class="w-3 h-3 bg-webropol-royalViolet-500 rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                  <div class="w-3 h-3 bg-webropol-green-500 rounded-full animate-bounce" style="animation-delay: 0.3s;"></div>
                </div>
                
                <!-- Custom CSS for gentle animations -->
                <style>
                  @keyframes gentleFloat {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-12px); }
                  }
                  
                  @keyframes gentleSideFloat {
                    0%, 100% { transform: translateX(0px); }
                    50% { transform: translateX(8px); }
                  }
                  
                  @keyframes gentleBreath {
                    0%, 100% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.08); opacity: 0.9; }
                  }
                  
                  @keyframes softPulse {
                    0%, 100% { opacity: 0.3; transform: scale(1); }
                    50% { opacity: 1; transform: scale(1.2); }
                  }
                </style>
              </div>
              
              <!-- Standard placeholder for other tabs -->
              <div x-show="adminTab !== 'image-gallery'" class="text-center py-12">
                <div class="w-20 h-20 bg-webropol-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4">
                  <i class="fal fa-tools text-4xl text-webropol-gray-400"></i>
                </div>
                <h3 class="text-xl font-bold text-webropol-gray-900 mb-2">Coming Soon</h3>
                <p class="text-webropol-gray-600 mb-1">Content for <span class="font-semibold text-webropol-primary-600" x-text="adminTab.replace(/-/g, ' ')"></span> is under development.</p>
                <p class="text-sm text-webropol-gray-500">This feature will be available in the next update.</p>
              </div>
            </div>
          </div>

          <!-- Survey & Reporting Reports Section -->
          <div x-show="activeTab === 'reports'" class="bg-white rounded-2xl shadow-medium border border-webropol-gray-200 overflow-hidden">
            <!-- Header with Search -->
            <div class="px-6 py-5 bg-white border-b border-webropol-gray-200">
              <div class="flex items-center justify-between gap-4 mb-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-br from-webropol-primary-100 to-webropol-primary-200 rounded-lg flex items-center justify-center">
                    <i class="fal fa-chart-bar text-webropol-primary-700"></i>
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-webropol-gray-900">Survey & Reporting Reports</h2>
                    <p class="text-sm text-webropol-gray-500">View and manage all your reports</p>
                  </div>
                </div>
                <div class="flex items-center gap-3">
                  <span class="text-sm text-webropol-gray-500">Open report in</span>
                  <span class="px-4 py-2 bg-webropol-primary-50 text-webropol-primary-700 rounded-lg text-sm font-semibold border border-webropol-primary-200">
                    Survey & Reporting
                  </span>
                </div>
              </div>
              
              <!-- Search Bar with Filter -->
              <div class="flex gap-3">
                <div class="relative flex-1">
                  <i class="fal fa-search absolute left-4 top-1/2 -translate-y-1/2 text-webropol-gray-400"></i>
                  <input 
                    type="text" 
                    x-model="searchQuery"
                    @input="filterReports()"
                    placeholder="Search reports by name, survey, or author..."
                    class="w-full pl-11 pr-10 py-3 border border-webropol-gray-300 rounded-xl focus:ring-2 focus:ring-webropol-primary-500 focus:border-webropol-primary-500 outline-none transition-all text-sm">
                  <button 
                    x-show="searchQuery"
                    @click="searchQuery = ''; filterReports()"
                    class="absolute right-3 top-1/2 -translate-y-1/2 text-webropol-gray-400 hover:text-webropol-gray-600 p-1">
                    <i class="fal fa-times"></i>
                  </button>
                </div>
                <button class="px-5 py-3 bg-white border border-webropol-gray-300 rounded-xl hover:bg-webropol-gray-50 transition-all flex items-center gap-2 text-webropol-gray-700 font-medium">
                  <i class="fal fa-filter"></i>
                  <span>Filters</span>
                </button>
                <button class="px-5 py-3 bg-webropol-primary-500 hover:bg-webropol-primary-600 text-white rounded-xl transition-all flex items-center gap-2 font-medium shadow-sm">
                  <i class="fal fa-plus"></i>
                  <span>New Report</span>
                </button>
              </div>
            </div>
            
            <!-- Reports Table -->
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-webropol-gray-50/50 border-b border-webropol-gray-200">
                  <tr>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('name')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Report name
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('survey')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Survey name
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('responses')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Responses
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('createdBy')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Created by
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('editedBy')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Edited by
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-left">
                      <button @click="sortTable('editedOn')" class="flex items-center gap-2 font-semibold text-sm text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors">
                        Edited on
                        <i class="fal fa-sort text-xs opacity-50"></i>
                      </button>
                    </th>
                    <th class="px-6 py-4 text-center">
                      <span class="font-semibold text-sm text-webropol-gray-700">Actions</span>
                    </th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-webropol-gray-100">
                  <template x-for="report in paginatedReports" :key="report.id">
                    <tr class="hover:bg-webropol-primary-50/30 transition-colors group">
                      <td class="px-6 py-4">
                        <a href="#" class="text-webropol-primary-600 hover:text-webropol-primary-700 font-semibold flex items-center gap-2" x-text="report.name">
                        </a>
                      </td>
                      <td class="px-6 py-4">
                        <a href="#" class="text-webropol-gray-700 hover:text-webropol-primary-600 transition-colors" x-text="report.survey"></a>
                      </td>
                      <td class="px-6 py-4">
                        <span class="inline-flex items-center gap-1.5 px-3 py-1 bg-webropol-green-50 text-webropol-green-700 rounded-lg text-sm font-medium">
                          <i class="fal fa-chart-line text-xs"></i>
                          <span x-text="report.responses"></span>
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="flex items-center gap-2">
                          <div class="w-7 h-7 bg-webropol-primary-100 rounded-lg flex items-center justify-center text-webropol-primary-700 text-xs font-semibold" x-text="report.createdBy.split(' ').map(n => n[0]).join('')"></div>
                          <span class="text-webropol-gray-700 text-sm" x-text="report.createdBy"></span>
                        </div>
                      </td>
                      <td class="px-6 py-4">
                        <div class="flex items-center gap-2">
                          <div class="w-7 h-7 bg-webropol-royalViolet-100 rounded-lg flex items-center justify-center text-webropol-royalViolet-700 text-xs font-semibold" x-text="report.editedBy.split(' ').map(n => n[0]).join('')"></div>
                          <span class="text-webropol-gray-700 text-sm" x-text="report.editedBy"></span>
                        </div>
                      </td>
                      <td class="px-6 py-4">
                        <span class="text-webropol-gray-600 text-sm" x-text="report.editedOn"></span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="flex items-center justify-center gap-2">
                          <button class="p-2 text-webropol-gray-400 hover:text-webropol-primary-600 hover:bg-webropol-primary-50 rounded-lg transition-all" title="View">
                            <i class="fal fa-eye"></i>
                          </button>
                          <button class="p-2 text-webropol-gray-400 hover:text-webropol-royalBlue-600 hover:bg-webropol-royalBlue-50 rounded-lg transition-all" title="Edit">
                            <i class="fal fa-edit"></i>
                          </button>
                          <button class="p-2 text-webropol-gray-400 hover:text-webropol-red-600 hover:bg-webropol-red-50 rounded-lg transition-all" title="Delete">
                            <i class="fal fa-trash"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
              
              <!-- Empty State -->
              <div x-show="filteredReports.length === 0" class="text-center py-20">
                <div class="w-20 h-20 bg-webropol-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4">
                  <i class="fal fa-search text-4xl text-webropol-gray-400"></i>
                </div>
                <h3 class="text-xl font-semibold text-webropol-gray-700 mb-2">No reports found</h3>
                <p class="text-webropol-gray-500 mb-6">Try adjusting your search criteria or create a new report</p>
                <button class="px-5 py-2.5 bg-webropol-primary-500 hover:bg-webropol-primary-600 text-white rounded-lg transition-all inline-flex items-center gap-2 font-medium">
                  <i class="fal fa-plus"></i>
                  <span>Create Report</span>
                </button>
              </div>
            </div>
            
            <!-- Pagination -->
            <div class="px-6 py-4 bg-webropol-gray-50/50 border-t border-webropol-gray-200 flex items-center justify-between">
              <div class="flex items-center gap-3">
                <span class="text-sm text-webropol-gray-600 font-medium" x-text="`Showing ${(currentPage - 1) * itemsPerPage + 1}-${Math.min(currentPage * itemsPerPage, totalReports)} of ${totalReports} reports`"></span>
              </div>
              
              <div class="flex items-center gap-2">
                <button 
                  @click="previousPage()"
                  :disabled="currentPage === 1"
                  :class="currentPage === 1 ? 'opacity-40 cursor-not-allowed' : 'hover:bg-webropol-gray-200'"
                  class="px-4 py-2 text-sm text-webropol-gray-700 bg-white border border-webropol-gray-300 rounded-lg transition-all font-medium">
                  <i class="fal fa-chevron-left mr-1.5"></i> Previous
                </button>
                <div class="flex items-center gap-1">
                  <template x-for="page in Math.min(totalPages, 5)" :key="page">
                    <button 
                      @click="currentPage = page"
                      :class="currentPage === page ? 'bg-webropol-primary-500 text-white' : 'bg-white text-webropol-gray-700 hover:bg-webropol-gray-100 border border-webropol-gray-300'"
                      class="w-10 h-10 rounded-lg transition-all font-medium text-sm"
                      x-text="page">
                    </button>
                  </template>
                </div>
                <button 
                  @click="nextPage()"
                  :disabled="currentPage === totalPages"
                  :class="currentPage === totalPages ? 'opacity-40 cursor-not-allowed' : 'hover:bg-webropol-gray-200'"
                  class="px-4 py-2 text-sm text-webropol-gray-700 bg-white border border-webropol-gray-300 rounded-lg transition-all font-medium">
                  Next <i class="fal fa-chevron-right ml-1.5"></i>
                </button>
              </div>
              
              <div class="flex items-center gap-2">
                <span class="text-sm text-webropol-gray-600 font-medium">Per page:</span>
                <select 
                  x-model="itemsPerPage" 
                  @change="currentPage = 1; filterReports()"
                  class="px-3 py-2 bg-white border border-webropol-gray-300 rounded-lg text-sm text-webropol-gray-700 font-medium focus:ring-2 focus:ring-webropol-primary-500 outline-none">
                  <option value="10">10</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                  <option value="100">100</option>
                </select>
              </div>
            </div>
          </div>
          
        </div>
      </main>
    </div>
  </div>

  <!-- Alpine.js App Logic -->
  <script>
    function biDashboardsApp() {
      return {
        // UI state
        
        // Active tab
        activeTab: 'employee-experience',
  uxTab: 'home',
        threesixtyTab: 'evaluations',
        adminTab: 'user-management',
        userMgmtTab: 'webropol-biview',        // Search and filter
        searchQuery: '',

  // UX survey select
  surveyMenuOpen: false,
  selectedSurvey: '',
  surveyOptions: [],
        
        // Pagination
        currentPage: 1,
        itemsPerPage: 10,
        
        // Sort
        sortField: null,
        sortDirection: 'asc',
        
  // Data
        allReports: [
          {
            id: 1,
            name: 'Multi-filter',
            survey: 'view comparison report te...',
            responses: 2000,
            createdBy: 'Ali Al-Zuhairi',
            editedBy: 'Ali Al-Zuhairi',
            editedOn: '10.01.2025, 13:29'
          },
          {
            id: 2,
            name: 'Filters and Comparisons',
            survey: 'view comparison report te...',
            responses: 2000,
            createdBy: 'Ali Al-Zuhairi',
            editedBy: 'Ali Al-Zuhairi',
            editedOn: '10.01.2025, 10:26'
          }
        ],
        filteredReports: [],
        evaluations360: [
          { id: 1, name: 'Ali 360', total: 5, completed: 5, status: 'Open' },
          { id: 2, name: 'kielitesti', total: 3, completed: 0, status: 'Open' }
        ],
        adminUsers: [
          {
            id: 3,
            username: 'ali.view',
            email: 'ali.al-zuhairi@webr...',
            firstName: 'Ali',
            lastName: 'Al-Zuhairi',
            userClass: '-',
            biViewClass: 'BI VIEW Admin',
            emailValidated: true,
            lastLogin: '12.11.2025'
          }
        ],

        // Admin statistics
        adminStats: {
          totalUsers: 3,
          activeUsers: 2,
          adminUsers: 5,
          pendingApproval: 2
        },

        // Employee Experience KPIs
        employeeStats: {
          reports: 0,
          responses: 2000,
          contributors: 5,
          today: 2
        },
        // Dashboards
        currentDashboard: {
          id: 'nps-demo',
          title: 'NPS Dashboard',
          breadcrumbs: ['All Dashboards', 'NPS Dashboard']
        },
        dashboardFiltersOpen: false,
        dashboardFilters: {
          dateRange: 'all',
          timeStart: '',
          timeEnd: '',
          viewTimeline: false,
          timelineInterval: 'hourly'
        },
        dashboardData: {
          totalResponses: 263,
          npsScore: -2,
          average: 6.6,
          detractors: { count: 102, percent: 39 },
          passives: { count: 64, percent: 24 },
          promoters: { count: 97, percent: 37 },
          breakdown: [
            { count: 0, percent: 0.0 },
            { count: 0, percent: 0.0 },
            { count: 0, percent: 0.0 },
            { count: 0, percent: 0.0 },
            { count: 102, percent: 38.8 },
            { count: 0, percent: 0.0 },
            { count: 0, percent: 0.0 },
            { count: 64, percent: 24.3 },
            { count: 0, percent: 0.0 },
            { count: 97, percent: 36.9 },
            { count: 0, percent: 0.0 }
          ]
        },
        
        // Computed properties
        get totalReports() {
          return this.filteredReports.length;
        },
        get uxTabLabel() {
          if (this.uxTab === 'responding') return 'Responding';
          if (this.uxTab === 'follow-up') return 'Follow up';
          return 'Home';
        },
        
        get totalPages() {
          return Math.ceil(this.filteredReports.length / this.itemsPerPage);
        },
        
        get paginatedReports() {
          const start = (this.currentPage - 1) * this.itemsPerPage;
          const end = start + this.itemsPerPage;
          return this.filteredReports.slice(start, end);
        },
        
        // Methods
        init() {
          this.loadFromLocalStorage();
          this.filterReports();
          this.checkLoginStatus();

          // Initialize KPI values
          this.employeeStats.reports = this.allReports.length;

          // Build survey options from reports (unique)
          const set = new Set(this.allReports.map(r => r.survey));
          this.surveyOptions = Array.from(set);
        },
        selectSurvey(name) {
          this.selectedSurvey = name;
          this.surveyMenuOpen = false;
        },
        // Dashboard actions (stubs)
        editDashboard() {
          alert('Edit dashboard: coming soon');
        },
        setDefaultDashboard() {
          try {
            const existing = JSON.parse(localStorage.getItem('webropol_bi_dashboards') || '{}');
            existing.defaultDashboard = this.currentDashboard.id;
            localStorage.setItem('webropol_bi_dashboards', JSON.stringify(existing));
            alert('Set as default dashboard');
          } catch (e) { console.error(e); }
        },
        editUserRights() { alert('Edit user rights: coming soon'); },
        shareWithViewUsers() { alert('Share with BI VIEW users: coming soon'); },
        viewDashboardLinks() { alert('Dashboard links: coming soon'); },
        inviteBiViewUsers() { alert('Invite BI VIEW users: coming soon'); },
        exportPDF() { window.print(); },
        exportWord() { alert('Export to MS Word: coming soon'); },
        
        // Dashboard filter actions
        clearTimeRange() {
          this.dashboardFilters.timeStart = '';
          this.dashboardFilters.timeEnd = '';
        },
        applyDashboardFilters() {
          // In a real implementation, this would filter dashboardData
          console.log('Applying filters:', this.dashboardFilters);
          alert('Filters applied!');
          this.dashboardFiltersOpen = false;
        },
        resetDashboardFilters() {
          this.dashboardFilters = {
            dateRange: 'all',
            timeStart: '',
            timeEnd: '',
            viewTimeline: false,
            timelineInterval: 'hourly'
          };
        },
        
        checkLoginStatus() {
          try {
            const loggedIn = localStorage.getItem('webropol_logged_in');
            if (loggedIn !== 'true') {
              window.location.href = 'login.html';
            }
          } catch (e) {
            console.error('Error checking login status:', e);
          }
        },
        
        handleLogout() {
          try {
            localStorage.removeItem('webropol_logged_in');
            window.location.href = 'login.html';
          } catch (e) {
            console.error('Error during logout:', e);
            window.location.href = 'login.html';
          }
        },
        
        loadFromLocalStorage() {
          try {
            const stored = localStorage.getItem('webropol_bi_reports');
            if (stored) {
              const data = JSON.parse(stored);
              this.allReports = data.reports || this.allReports;
            }
          } catch (e) {
            console.error('Error loading from localStorage:', e);
          }
        },
        
        saveToLocalStorage() {
          try {
            localStorage.setItem('webropol_bi_reports', JSON.stringify({
              reports: this.allReports,
              lastUpdated: new Date().toISOString()
            }));
          } catch (e) {
            console.error('Error saving to localStorage:', e);
          }
        },
        
        filterReports() {
          const query = this.searchQuery.toLowerCase().trim();
          
          if (!query) {
            this.filteredReports = [...this.allReports];
          } else {
            this.filteredReports = this.allReports.filter(report => {
              return (
                report.name.toLowerCase().includes(query) ||
                report.survey.toLowerCase().includes(query) ||
                report.createdBy.toLowerCase().includes(query) ||
                report.editedBy.toLowerCase().includes(query)
              );
            });
          }
          
          // Reset to first page when filtering
          this.currentPage = 1;
        },
        
        sortTable(field) {
          if (this.sortField === field) {
            this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
          } else {
            this.sortField = field;
            this.sortDirection = 'asc';
          }
          
          this.filteredReports.sort((a, b) => {
            let aVal = a[field];
            let bVal = b[field];
            
            // Handle numeric values
            if (typeof aVal === 'number' && typeof bVal === 'number') {
              return this.sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
            }
            
            // Handle string values
            aVal = String(aVal).toLowerCase();
            bVal = String(bVal).toLowerCase();
            
            if (this.sortDirection === 'asc') {
              return aVal.localeCompare(bVal);
            } else {
              return bVal.localeCompare(aVal);
            }
          });
        },
        
        nextPage() {
          if (this.currentPage < this.totalPages) {
            this.currentPage++;
          }
        },
        
        previousPage() {
          if (this.currentPage > 1) {
            this.currentPage--;
          }
        }
      };
    }
  </script>
</body>
</html>
