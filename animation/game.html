<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flappy Skater</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 100%);
      overflow: hidden;
    }

    #gameContainer {
      position: relative;
    }

    #gameCanvas {
      border: 3px solid #fff;
      border-radius: 10px;
      box-shadow: 0 10px 50px rgba(0,0,0,0.3);
      background: transparent;
      display: block;
    }

    #gameInfo {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 10;
    }

    #score {
      font-size: 48px;
      font-weight: bold;
      color: white;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
      margin-bottom: 10px;
    }

    #instructions {
      font-size: 18px;
      color: white;
      background: rgba(0,0,0,0.3);
      padding: 10px 20px;
      border-radius: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    #gameOver {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.7);
      padding: 25px 40px;
      border-radius: 15px;
      text-align: center;
      display: none;
      z-index: 100;
    }

    #gameOver h1 {
      color: #ff4444;
      font-size: 32px;
      margin-bottom: 15px;
    }

    #gameOver p {
      color: white;
      font-size: 18px;
      margin-bottom: 20px;
    }

    #restartBtn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 10px 30px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    #restartBtn:hover {
      transform: scale(1.1);
    }

    #restartBtn:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <div id="gameInfo">
      <div id="score">0</div>
      <div id="instructions">TAP or SPACE to Fly!</div>
    </div>

    <div id="gameOver">
      <h1>Game Over!</h1>
      <p>Score: <span id="finalScore">0</span></p>
      <button id="restartBtn">Play Again</button>
    </div>

    <canvas id="gameCanvas"></canvas>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Set canvas size
    canvas.width = 400;
    canvas.height = 600;

    // Game variables
    let score = 0;
    let isGameStarted = false;
    let isGameOver = false;
    let frameCount = 0;

    // Bird (Skater) object
    const bird = {
      x: 80,
      y: 300,
      width: 30,
      height: 30,
      velocityY: 0,
      gravity: 0.3,
      flapPower: -6,
      rotation: 0
    };

    // Pipes array
    let pipes = [];
    const pipeWidth = 60;
    const pipeGap = 220;
    const pipeSpeed = 1.2;
    let pipeTimer = 0;
    const pipeInterval = 130; // frames between pipes

    // Draw bird (simple circle for now)
    function drawBird() {
      ctx.save();
      ctx.translate(bird.x + bird.width/2, bird.y + bird.height/2);
      ctx.rotate(bird.rotation);
      
      // Body (circle)
      ctx.fillStyle = '#FF6B6B';
      ctx.beginPath();
      ctx.arc(0, 0, bird.width/2, 0, Math.PI * 2);
      ctx.fill();
      
      // Eye
      ctx.fillStyle = 'white';
      ctx.beginPath();
      ctx.arc(8, -5, 6, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.fillStyle = 'black';
      ctx.beginPath();
      ctx.arc(8, -5, 3, 0, Math.PI * 2);
      ctx.fill();
      
      // Wing
      ctx.fillStyle = '#FF4757';
      ctx.beginPath();
      ctx.ellipse(-5, 5, 12, 8, -0.3, 0, Math.PI * 2);
      ctx.fill();
      
      ctx.restore();
    }

    // Draw pipe
    function drawPipe(pipe) {
      // Top pipe
      ctx.fillStyle = '#5FBA7D';
      ctx.fillRect(pipe.x, 0, pipeWidth, pipe.top);
      
      // Top pipe cap
      ctx.fillStyle = '#4A9D6A';
      ctx.fillRect(pipe.x - 5, pipe.top - 30, pipeWidth + 10, 30);
      
      // Bottom pipe
      ctx.fillRect(pipe.x, pipe.bottom, pipeWidth, canvas.height - pipe.bottom);
      
      // Bottom pipe cap
      ctx.fillRect(pipe.x - 5, pipe.bottom, pipeWidth + 10, 30);
      
      // Pipe highlights
      ctx.fillStyle = '#7CCD9C';
      ctx.fillRect(pipe.x + 5, 0, 10, pipe.top);
      ctx.fillRect(pipe.x + 5, pipe.bottom, 10, canvas.height - pipe.bottom);
    }

    // Draw background
    function drawBackground() {
      // Clouds
      ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
      
      const cloudOffset = (frameCount * 0.5) % (canvas.width + 200);
      
      // Cloud 1
      ctx.beginPath();
      ctx.arc(100 - cloudOffset, 80, 20, 0, Math.PI * 2);
      ctx.arc(125 - cloudOffset, 80, 25, 0, Math.PI * 2);
      ctx.arc(150 - cloudOffset, 80, 20, 0, Math.PI * 2);
      ctx.fill();
      
      // Cloud 2
      ctx.beginPath();
      ctx.arc(300 - cloudOffset, 120, 25, 0, Math.PI * 2);
      ctx.arc(330 - cloudOffset, 120, 30, 0, Math.PI * 2);
      ctx.arc(360 - cloudOffset, 120, 25, 0, Math.PI * 2);
      ctx.fill();
    }

    // Update bird physics
    function updateBird() {
      if (!isGameStarted || isGameOver) return;
      
      bird.velocityY += bird.gravity;
      bird.y += bird.velocityY;
      
      // Rotation based on velocity
      bird.rotation = Math.min(Math.max(bird.velocityY * 0.05, -0.5), 0.8);
      
      // Check if bird hits ground or ceiling
      if (bird.y + bird.height > canvas.height || bird.y < 0) {
        gameOver();
      }
    }

    // Flap (jump)
    function flap() {
      if (!isGameStarted) {
        isGameStarted = true;
        bird.velocityY = bird.flapPower;
        return;
      }
      
      if (isGameOver) return;
      
      bird.velocityY = bird.flapPower;
    }

    // Create pipe
    function createPipe() {
      const minTop = 50;
      const maxTop = canvas.height - pipeGap - 50;
      const top = Math.random() * (maxTop - minTop) + minTop;
      
      pipes.push({
        x: canvas.width,
        top: top,
        bottom: top + pipeGap,
        passed: false
      });
    }

    // Update pipes
    function updatePipes() {
      if (!isGameStarted || isGameOver) return;
      
      // Move pipes
      pipes.forEach(pipe => {
        pipe.x -= pipeSpeed;
        
        // Check if bird passed pipe
        if (!pipe.passed && pipe.x + pipeWidth < bird.x) {
          pipe.passed = true;
          score++;
          document.getElementById('score').textContent = score;
        }
      });
      
      // Remove off-screen pipes
      pipes = pipes.filter(pipe => pipe.x + pipeWidth > 0);
      
      // Create new pipes
      pipeTimer++;
      if (pipeTimer > pipeInterval) {
        createPipe();
        pipeTimer = 0;
      }
    }

    // Check collision
    function checkCollision() {
      if (!isGameStarted || isGameOver) return;
      
      pipes.forEach(pipe => {
        // Check if bird is within pipe x range
        if (
          bird.x + bird.width > pipe.x &&
          bird.x < pipe.x + pipeWidth
        ) {
          // Check if bird hit top or bottom pipe
          if (bird.y < pipe.top || bird.y + bird.height > pipe.bottom) {
            gameOver();
          }
        }
      });
    }

    // Restart game
    function restart() {
      isGameOver = false;
      isGameStarted = false;
      score = 0;
      frameCount = 0;
      pipeTimer = 0;
      pipes = [];
      bird.y = 300;
      bird.velocityY = 0;
      bird.rotation = 0;
      document.getElementById('score').textContent = '0';
      document.getElementById('gameOver').style.display = 'none';
    }

    // Game over
    function gameOver() {
      if (isGameOver) return;
      isGameOver = true;
      document.getElementById('finalScore').textContent = score;
      document.getElementById('gameOver').style.display = 'block';
    }

    // Main game loop
    function gameLoop() {
      // Clear canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Draw background
      drawBackground();
      
      // Update and draw game objects
      updateBird();
      updatePipes();
      checkCollision();
      
      // Draw pipes
      pipes.forEach(pipe => drawPipe(pipe));
      
      // Draw bird
      drawBird();
      
      frameCount++;
      requestAnimationFrame(gameLoop);
    }

    // Event listeners
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        flap();
      }
    });

    canvas.addEventListener('click', flap);
    document.getElementById('restartBtn').addEventListener('click', restart);

    // Start game loop
    gameLoop();
  </script>
</body>
</html>
