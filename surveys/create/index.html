<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Survey - Webropol</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/50ef2d3cf8.js" crossorigin="anonymous"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'webropol-teal': { 50: '#f0fdff', 100: '#ccf7fe', 200: '#99effd', 300: '#66e0fa', 400: '#22ccf1', 500: '#06b6d4', 600: '#0891b2', 700: '#0e7490', 800: '#155e75', 900: '#164e63' },
            'webropol-gray': { 50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a' },
            'webropol-teal-': { 50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a' },
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
            'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
            'card': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
            'xl': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="../../design-system/styles/animations.css" rel="stylesheet">
  <style>
    [x-cloak] {
      display: none !important;
    }

    body {
      scrollbar-width: thin;
      scrollbar-color: #cbd5e1 #f8fafc;
      font-family: 'Inter', sans-serif;
    }

    body::-webkit-scrollbar {
      width: 6px;
    }

    body::-webkit-scrollbar-track {
      background: #f8fafc;
    }

    body::-webkit-scrollbar-thumb {
      background-color: #cbd5e1;
      border-radius: 6px;
    }

    .glass-effect {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.9);
    }

    .template-card {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .template-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .template-card.selected {
      border: 2px solid #06b6d4;
      box-shadow: 0 0 0 4px rgba(6, 182, 212, 0.1);
    }

    .preview-container {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      position: relative;
      overflow: hidden;
    }

    .preview-form {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .step-indicator {
      transition: all 0.3s ease;
    }

    .step-indicator.active {
      background: linear-gradient(135deg, #06b6d4, #0891b2);
      color: white;
    }

    .step-indicator.completed {
      background: #10b981;
      color: white;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .template-gradient-1 {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .template-gradient-2 {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .template-gradient-3 {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .template-gradient-4 {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }

    .template-gradient-5 {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }

    .template-gradient-6 {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }

    .floating-particles {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      animation: float 20s infinite linear;
    }

    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }
  </style>
  <script src="../../design-system/components/navigation/Sidebar.js" type="module"></script>
  <script src="../../design-system/components/navigation/Header.js" type="module"></script>
  <script src="../../design-system/components/navigation/Breadcrumbs.js" type="module"></script>
  <script src="../../design-system/components/interactive/FloatingButton.js" type="module"></script>
  <script src="../../design-system/components/modals/Modal.js" type="module"></script>
  <script src="../../design-system/components/modals/SettingsModal.js" type="module"></script>
  <script src="../../design-system/utils/theme-manager.js" type="module"></script>
  <script src="../../design-system/utils/global-settings-manager.js" type="module"></script>
</head>
<body x-data="createSurveyApp()">
  <div class="flex h-screen">
    <webropol-sidebar active="surveys" base="../../"></webropol-sidebar>
    <div class="flex-1 flex flex-col overflow-hidden">
      <webropol-header username="Ali Al-Zuhairi" show-notifications="true" show-help="true" show-user-menu="true"></webropol-header>
      <div class="bg-white/70 backdrop-blur px-0 sm:px-4">
        <webropol-breadcrumbs trail='[{"label":"Home","url":"../../index.html"},{"label":"Surveys","url":"../index.html"},{"label":"Create New Survey","url":"index.html"}]'></webropol-breadcrumbs>
      </div>
      
      <main class="flex-1 overflow-hidden" role="main">
        <div class="h-full flex">
          <!-- Left Panel - Survey Creation Form -->
          <div class="w-1/2 overflow-y-auto px-8 py-8 bg-white/50">
            <div class="max-w-2xl mx-auto">
              <!-- Header -->
              <div class="mb-8">
                <h1 class="page-title">Create a New Survey</h1>
                <p class="text-webropol-gray-600">Build engaging surveys with our intuitive tools and templates</p>
              </div>

              <!-- Step Indicator -->
              <div class="flex items-center mb-8">
                <div class="step-indicator active w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold mr-3">1</div>
                <div class="flex-1 h-px bg-webropol-gray-200 mr-3"></div>
                <div class="step-indicator w-8 h-8 rounded-full bg-webropol-gray-200 flex items-center justify-center text-sm font-semibold mr-3">2</div>
                <div class="flex-1 h-px bg-webropol-gray-200 mr-3"></div>
                <div class="step-indicator w-8 h-8 rounded-full bg-webropol-gray-200 flex items-center justify-center text-sm font-semibold">3</div>
              </div>

              <!-- Survey Name and Settings -->
              <div class="bg-white rounded-2xl p-6 shadow-soft mb-6 fade-in">
                <h2 class="text-xl font-semibold text-webropol-gray-900 mb-4">Survey Details</h2>
                
                <div class="space-y-6">
                  <!-- Survey Title -->
                  <div>
                    <label class="block text-sm font-medium text-webropol-gray-700 mb-2">Survey Title *</label>
                    <input 
                      type="text" 
                      x-model="surveyTitle"
                      placeholder="Enter your survey title..."
                      class="w-full px-4 py-3 border border-webropol-gray-200 rounded-xl focus:ring-2 focus:ring-webropol-teal-500 focus:border-transparent transition-all"
                    >
                  </div>

                  <!-- Survey Description -->
                  <div>
                    <label class="block text-sm font-medium text-webropol-gray-700 mb-2">Description (Optional)</label>
                    <textarea 
                      x-model="surveyDescription"
                      placeholder="Brief description of your survey..."
                      rows="3"
                      class="w-full px-4 py-3 border border-webropol-gray-200 rounded-xl focus:ring-2 focus:ring-webropol-teal-500 focus:border-transparent transition-all"
                    ></textarea>
                  </div>

                  <!-- Auto-delete Settings -->
                  <div class="bg-webropol-gray-50 rounded-xl p-4">
                    <div class="flex items-center justify-between mb-3">
                      <label class="flex items-center text-sm font-medium text-webropol-gray-700">
                        <input type="checkbox" x-model="autoDelete" class="mr-2 rounded text-webropol-teal-600">
                        Automatic Deletion Date
                      </label>
                      <i class="fal fa-info-circle text-webropol-gray-400 cursor-help" title="Survey will be automatically deleted after this date"></i>
                    </div>
                    <div x-show="autoDelete" x-transition>
                      <input 
                        type="date" 
                        x-model="deleteDate"
                        class="w-full px-4 py-2 border border-webropol-gray-200 rounded-lg focus:ring-2 focus:ring-webropol-teal-500 focus:border-transparent transition-all"
                      >
                      <p class="text-xs text-webropol-gray-500 mt-1">Survey will be automatically deleted after this date.</p>
                    </div>
                  </div>

                  <!-- Survey Folder -->
                  <div>
                    <label class="block text-sm font-medium text-webropol-gray-700 mb-2">Survey Folder</label>
                    <div class="flex gap-2">
                      <select x-model="selectedFolder" class="flex-1 px-4 py-3 border border-webropol-gray-200 rounded-xl focus:ring-2 focus:ring-webropol-teal-500 focus:border-transparent transition-all">
                        <option value="root">Root</option>
                        <option value="employee-surveys">Employee Surveys</option>
                        <option value="customer-feedback">Customer Feedback</option>
                        <option value="market-research">Market Research</option>
                      </select>
                      <button class="px-4 py-3 border border-webropol-gray-200 rounded-xl hover:bg-webropol-gray-50 transition-all">
                        <i class="fal fa-folder-plus text-webropol-gray-600"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Template Selection -->
              <div class="bg-white rounded-2xl p-6 shadow-soft fade-in">
                <h2 class="text-xl font-semibold text-webropol-gray-900 mb-4">Choose a Template</h2>
                
                <!-- Template Categories -->
                <div class="flex gap-2 mb-6">
                  <template x-for="(category, index) in templateCategories" :key="index">
                    <button 
                      @click="activeCategory = category.id"
                      :class="activeCategory === category.id ? 'bg-webropol-teal-500 text-white' : 'bg-webropol-gray-100 text-webropol-gray-700 hover:bg-webropol-gray-200'"
                      class="px-4 py-2 rounded-lg font-medium transition-all text-sm"
                      x-text="category.name + ' (' + category.count + ')'"
                    ></button>
                  </template>
                </div>

                <!-- Template Grid -->
                <div class="grid grid-cols-2 gap-4">
                  <template x-for="(template, index) in filteredTemplates" :key="index">
                    <div 
                      @click="selectedTemplate = template.id"
                      :class="selectedTemplate === template.id ? 'template-card selected' : 'template-card'"
                      class="border border-webropol-gray-200 rounded-xl p-4 cursor-pointer"
                    >
                      <div :class="template.gradient" class="w-full h-24 rounded-lg mb-3 flex items-center justify-center">
                        <i :class="template.icon" class="text-white text-2xl"></i>
                      </div>
                      <h3 class="font-semibold text-webropol-gray-900 mb-1" x-text="template.name"></h3>
                      <p class="text-xs text-webropol-gray-600" x-text="template.description"></p>
                      <div class="mt-2">
                        <button 
                          class="w-full py-2 text-sm font-medium rounded-lg transition-all"
                          :class="selectedTemplate === template.id ? 'bg-webropol-teal-500 text-white' : 'bg-webropol-gray-100 text-webropol-gray-700 hover:bg-webropol-gray-200'"
                        >
                          <span x-text="selectedTemplate === template.id ? 'Selected' : 'Select'"></span>
                        </button>
                      </div>
                    </div>
                  </template>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="flex gap-4 mt-8">
                <button 
                  @click="createSurvey()"
                  :disabled="!surveyTitle || !selectedTemplate"
                  :class="(!surveyTitle || !selectedTemplate) ? 'opacity-50 cursor-not-allowed' : 'hover:from-webropol-teal-600 hover:to-webropol-teal-700'"
                  class="flex-1 py-4 bg-gradient-to-r from-webropol-teal-500 to-webropol-teal-600 text-white font-semibold rounded-xl shadow-medium transition-all"
                >
                  <i class="fal fa-magic mr-2"></i>
                  Create Your Survey
                </button>
                <button class="px-6 py-4 border border-webropol-gray-200 text-webropol-gray-700 font-semibold rounded-xl hover:bg-webropol-gray-50 transition-all">
                  Save as Draft
                </button>
              </div>
            </div>
          </div>

          <!-- Right Panel - Live Preview -->
          <div class="w-1/2 preview-container relative">
            <!-- Floating Particles -->
            <div class="floating-particles">
              <div class="particle" style="left: 10%; width: 8px; height: 8px; animation-delay: 0s;"></div>
              <div class="particle" style="left: 20%; width: 12px; height: 12px; animation-delay: 2s;"></div>
              <div class="particle" style="left: 35%; width: 6px; height: 6px; animation-delay: 4s;"></div>
              <div class="particle" style="left: 50%; width: 10px; height: 10px; animation-delay: 6s;"></div>
              <div class="particle" style="left: 65%; width: 8px; height: 8px; animation-delay: 8s;"></div>
              <div class="particle" style="left: 80%; width: 14px; height: 14px; animation-delay: 10s;"></div>
              <div class="particle" style="left: 90%; width: 6px; height: 6px; animation-delay: 12s;"></div>
            </div>

            <div class="flex items-center justify-center h-full p-8">
              <div class="preview-form w-full max-w-md p-8">
                <div class="text-center mb-6">
                  <h3 class="text-2xl font-bold text-webropol-gray-900 mb-2">Live Preview</h3>
                  <p class="text-webropol-gray-600">See how your survey will look</p>
                </div>

                <!-- Preview Content -->
                <div class="space-y-6">
                  <div class="text-center">
                    <h4 class="text-lg font-semibold text-webropol-gray-900 mb-2" x-text="surveyTitle || 'Your Survey Title'"></h4>
                    <p class="text-sm text-webropol-gray-600" x-text="surveyDescription || 'Survey description will appear here'"></p>
                  </div>

                  <!-- Sample Question 1 -->
                  <div class="bg-white/70 rounded-xl p-4">
                    <h5 class="font-medium text-webropol-gray-900 mb-3">1. How satisfied are you with our service?</h5>
                    <div class="space-y-2">
                      <label class="flex items-center">
                        <input type="radio" name="q1" class="mr-3 text-webropol-teal-600">
                        <span class="text-sm">Very Satisfied</span>
                      </label>
                      <label class="flex items-center">
                        <input type="radio" name="q1" class="mr-3 text-webropol-teal-600">
                        <span class="text-sm">Satisfied</span>
                      </label>
                      <label class="flex items-center">
                        <input type="radio" name="q1" class="mr-3 text-webropol-teal-600">
                        <span class="text-sm">Neutral</span>
                      </label>
                    </div>
                  </div>

                  <!-- Sample Question 2 -->
                  <div class="bg-white/70 rounded-xl p-4">
                    <h5 class="font-medium text-webropol-gray-900 mb-3">2. Please provide your contact information</h5>
                    <div class="space-y-3">
                      <div>
                        <label class="block text-xs text-webropol-gray-600 mb-1">First Name</label>
                        <input type="text" placeholder="Enter first name" class="w-full px-3 py-2 border border-webropol-gray-200 rounded-lg text-sm">
                      </div>
                      <div>
                        <label class="block text-xs text-webropol-gray-600 mb-1">Email</label>
                        <input type="email" placeholder="Enter email" class="w-full px-3 py-2 border border-webropol-gray-200 rounded-lg text-sm">
                      </div>
                    </div>
                  </div>

                  <!-- Progress Bar -->
                  <div class="mt-6">
                    <div class="flex justify-between text-xs text-webropol-gray-600 mb-2">
                      <span>Progress</span>
                      <span>2 of 5 questions</span>
                    </div>
                    <div class="w-full bg-webropol-gray-200 rounded-full h-2">
                      <div class="bg-gradient-to-r from-webropol-teal-500 to-webropol-teal-600 h-2 rounded-full" style="width: 40%"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    function createSurveyApp() {
      return {
        // Form Data
        surveyTitle: '',
        surveyDescription: '',
        autoDelete: false,
        deleteDate: '',
        selectedFolder: 'root',
        selectedTemplate: 'blank',
        activeCategory: 'webropol',

        // Template Categories
        templateCategories: [
          { id: 'webropol', name: 'Webropol Templates', count: 8 },
          { id: 'my', name: 'My Templates', count: 3 },
          { id: 'shared', name: 'Shared Templates', count: 12 }
        ],

        // Templates
        templates: [
          {
            id: 'blank',
            category: 'webropol',
            name: 'Blank Template',
            description: 'Start from scratch',
            icon: 'fal fa-file-alt',
            gradient: 'template-gradient-1'
          },
          {
            id: 'customer-satisfaction',
            category: 'webropol',
            name: 'Customer Satisfaction',
            description: 'Measure customer happiness',
            icon: 'fal fa-smile',
            gradient: 'template-gradient-2'
          },
          {
            id: 'employee-engagement',
            category: 'webropol',
            name: 'Employee Engagement',
            description: 'Assess workplace satisfaction',
            icon: 'fal fa-users',
            gradient: 'template-gradient-3'
          },
          {
            id: 'market-research',
            category: 'webropol',
            name: 'Market Research',
            description: 'Gather market insights',
            icon: 'fal fa-chart-line',
            gradient: 'template-gradient-4'
          },
          {
            id: 'event-feedback',
            category: 'webropol',
            name: 'Event Feedback',
            description: 'Post-event evaluation',
            icon: 'fal fa-calendar-alt',
            gradient: 'template-gradient-5'
          },
          {
            id: 'product-feedback',
            category: 'webropol',
            name: 'Product Feedback',
            description: 'Product improvement insights',
            icon: 'fal fa-star',
            gradient: 'template-gradient-6'
          },
          {
            id: 'nps',
            category: 'webropol',
            name: 'Net Promoter Score',
            description: 'Measure customer loyalty',
            icon: 'fal fa-thumbs-up',
            gradient: 'template-gradient-1'
          },
          {
            id: 'training-evaluation',
            category: 'webropol',
            name: 'Training Evaluation',
            description: 'Assess training effectiveness',
            icon: 'fal fa-graduation-cap',
            gradient: 'template-gradient-2'
          },
          {
            id: 'my-custom-1',
            category: 'my',
            name: 'My Custom Survey',
            description: 'Saved template',
            icon: 'fal fa-bookmark',
            gradient: 'template-gradient-3'
          },
          {
            id: 'my-custom-2',
            category: 'my',
            name: 'Team Survey Template',
            description: 'Reusable team survey',
            icon: 'fal fa-users-cog',
            gradient: 'template-gradient-4'
          },
          {
            id: 'my-custom-3',
            category: 'my',
            name: 'Quarterly Review',
            description: 'Performance evaluation',
            icon: 'fal fa-calendar-check',
            gradient: 'template-gradient-5'
          }
        ],

        // Computed
        get filteredTemplates() {
          return this.templates.filter(template => template.category === this.activeCategory);
        },

        // Methods
        createSurvey() {
          if (!this.surveyTitle || !this.selectedTemplate) {
            return;
          }

          // Simulate survey creation
          alert('Survey created successfully! Redirecting to survey editor...');
          
          // In a real app, this would redirect to the survey editor
          // window.location.href = `/surveys/edit/${surveyId}`;
        },

        init() {
          // Set default date to 30 days from now
          const futureDate = new Date();
          futureDate.setDate(futureDate.getDate() + 30);
          this.deleteDate = futureDate.toISOString().split('T')[0];
        }
      }
    }
  </script>

  <!-- Floating Button -->
  <webropol-floating-button></webropol-floating-button>
</body>
</html>
