<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Survey - Webropol</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/50ef2d3cf8.js" crossorigin="anonymous"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'webropol-primary': { 50: '#f0fdff', 100: '#ccf7fe', 200: '#99effd', 300: '#66e0fa', 400: '#22ccf1', 500: '#06b6d4', 600: '#0891b2', 700: '#0e7490', 800: '#155e75', 900: '#164e63' },
            'webropol-gray': { 50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a' },
            'webropol-primary-': { 50: '#eff6ff', 100: '#dbeafe', 200: '#bfdbfe', 300: '#93c5fd', 400: '#60a5fa', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8', 800: '#1e40af', 900: '#1e3a8a' },
          },
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          boxShadow: {
            'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
            'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
            'card': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../design-system/styles/tokens.css">
  <link href="../../design-system/styles/animations.css" rel="stylesheet">
  <style>
    [x-cloak] {
      display: none !important;
    }

    body {
      font-family: 'Inter', sans-serif;
    }

    .glass-effect {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.9);
    }

    .template-card {
      transition: all 0.2s ease;
      border: 2px solid transparent;
    }

    .template-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .template-card.selected {
      border-color: #06b6d4;
      box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.1);
    }

    .template-preview {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .template-bars {
      display: flex;
      flex-direction: column;
      gap: 8px;
      opacity: 0.6;
    }

    .template-bar {
      height: 4px;
      border-radius: 2px;
      background: #334155;
    }

    .check-circle {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #06b6d4;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .template-card.selected .check-circle {
      opacity: 1;
    }

    .tab-button {
      transition: all 0.2s ease;
      border-bottom: 2px solid transparent;
      padding: 12px 16px;
    }

    .tab-button.active {
      border-bottom-color: #06b6d4;
      color: #06b6d4;
      font-weight: 600;
    }

    .tab-button:hover:not(.active) {
      color: #0891b2;
      background: rgba(6, 182, 212, 0.05);
    }

    .pagination-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #cbd5e1;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .pagination-dot.active {
      background: #06b6d4;
      transform: scale(1.2);
    }

    .hover-lift {
      transition: all 0.2s ease;
    }

    .hover-lift:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 25px -5px rgba(0, 0, 0, 0.15);
    }
  </style>
  <script src="../../design-system/components/navigation/Sidebar.js" type="module"></script>
  <script src="../../design-system/components/navigation/Header.js" type="module"></script>
  <script src="../../design-system/components/navigation/Breadcrumbs.js" type="module"></script>
  <script src="../../design-system/components/interactive/FloatingButton.js" type="module"></script>
  <script src="../../design-system/components/modals/Modal.js" type="module"></script>
  <script src="../../design-system/components/modals/SettingsModal.js" type="module"></script>
  <script src="../../design-system/utils/theme-manager.js" type="module"></script>
  <script src="../../design-system/utils/global-settings-manager.js" type="module"></script>
</head>
<body x-data="createSurveyApp()">
  <div class="flex h-screen">
    <webropol-sidebar active="surveys" base="../../"></webropol-sidebar>
    <div class="flex-1 flex flex-col overflow-hidden">
      <webropol-header username="Ali Al-Zuhairi" show-notifications="true" show-help="true" show-user-menu="true" show-theme-selector="true"></webropol-header>
      <div class="bg-white/70 backdrop-blur px-0 sm:px-4">
        <webropol-breadcrumbs trail='[{"label":"Home","url":"../../index.html"},{"label":"Surveys","url":"../index.html"},{"label":"Create New Survey","url":"create-legacy-new.html"}]'></webropol-breadcrumbs>
      </div>
      
      <main class="flex-1 overflow-y-auto px-6 py-12 lg:px-12 pb-24" role="main">
        <div class="max-w-4xl mx-auto">
          <!-- Survey Details Card -->
          <div class="bg-white rounded-2xl shadow-soft p-8 mb-6">
            <!-- Survey Title -->
            <div class="mb-6">
              <label class="block text-sm font-medium text-webropol-gray-900 mb-2">
                Survey title <span class="text-red-500">*</span>
              </label>
              <input 
                type="text" 
                x-model="surveyTitle"
                placeholder="Enter survey title"
                class="w-full px-4 py-3 border border-webropol-gray-300 rounded-xl focus:ring-2 focus:ring-webropol-primary-500 focus:border-webropol-primary-500 transition-all text-webropol-gray-900 placeholder-webropol-gray-400"
              >
            </div>

            <!-- Survey Folder -->
            <div class="mb-6">
              <label class="block text-sm font-medium text-webropol-gray-900 mb-2">Survey folder</label>
              <div class="flex items-center justify-between bg-webropol-gray-50 border border-webropol-gray-300 rounded-xl px-4 py-3">
                <span class="text-webropol-gray-700" x-text="selectedFolder"></span>
                <button 
                  @click="showFolderModal = true"
                  class="text-webropol-gray-600 hover:text-webropol-primary-600 font-medium text-sm transition-colors"
                >
                  Change
                </button>
              </div>
            </div>

            <!-- Automatic Deletion Date -->
            <div class="space-y-4">
              <label class="flex items-center space-x-3">
                <input 
                  type="checkbox" 
                  x-model="autoDeleteEnabled"
                  class="w-5 h-5 text-webropol-primary-600 border-webropol-gray-300 rounded focus:ring-webropol-primary-500 transition-colors"
                >
                <div class="flex items-center space-x-2">
                  <span class="font-medium text-webropol-gray-900">Automatic Deletion Date</span>
                  <i class="fal fa-info-circle text-webropol-gray-400 text-sm"></i>
                </div>
              </label>
              
              <div x-show="autoDeleteEnabled" x-transition class="ml-8">
                <input 
                  type="date" 
                  x-model="deletionDate"
                  class="px-4 py-2 border border-webropol-gray-300 rounded-lg focus:ring-2 focus:ring-webropol-primary-500 focus:border-webropol-primary-500 transition-all text-webropol-gray-700"
                >
                <p class="text-sm text-webropol-gray-500 mt-2">Survey will be automatically deleted after this date.</p>
              </div>
            </div>
          </div>

          <!-- Layout Template Card -->
          <div class="bg-white rounded-2xl shadow-soft p-8">
            <!-- Template Header -->
            <div class="flex items-center space-x-2 mb-6">
              <h2 class="text-xl font-semibold text-webropol-gray-900">Layout template</h2>
              <i class="fal fa-info-circle text-webropol-gray-400"></i>
            </div>

            <!-- Template Tabs -->
            <div class="flex space-x-0 mb-8 border-b border-webropol-gray-200">
              <template x-for="tab in templateTabs" :key="tab.id">
                <button 
                  @click="activeTab = tab.id; currentPage = 0"
                  :class="activeTab === tab.id ? 'active' : ''"
                  class="tab-button text-sm font-medium text-webropol-gray-700"
                  x-text="tab.name + ' (' + tab.count + ')'"
                ></button>
              </template>
            </div>

            <!-- Template Grid -->
            <div class="grid grid-cols-5 gap-4 mb-6">
              <template x-for="template in visibleTemplates" :key="template.id">
                <div 
                  @click="selectedTemplate = template.id"
                  :class="selectedTemplate === template.id ? 'selected' : ''"
                  class="template-card bg-white border border-webropol-gray-200 rounded-xl overflow-hidden cursor-pointer relative"
                >
                  <div class="template-preview h-24 relative">
                    <div class="template-bars">
                      <div class="template-bar" :style="`width: ${template.bars[0]}%`"></div>
                      <div class="template-bar" :style="`width: ${template.bars[1]}%`"></div>
                      <div class="template-bar" :style="`width: ${template.bars[2]}%`"></div>
                    </div>
                    <div class="check-circle">
                      <i class="fas fa-check"></i>
                    </div>
                  </div>
                  <div class="p-3 text-center">
                    <p class="text-sm font-medium text-webropol-gray-900" x-text="template.name"></p>
                  </div>
                </div>
              </template>
            </div>

            <!-- Pagination -->
            <div class="flex justify-center space-x-2">
              <template x-for="(dot, index) in paginationDots" :key="index">
                <div 
                  @click="currentPage = index"
                  :class="currentPage === index ? 'active' : ''"
                  class="pagination-dot"
                ></div>
              </template>
            </div>
          </div>
        </div>

        <!-- Folder Selection Modal -->
        <div 
          x-show="showFolderModal" 
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0"
          x-transition:enter-end="opacity-100"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100"
          x-transition:leave-end="opacity-0"
          class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
          @click="showFolderModal = false"
        >
          <div 
            class="bg-white rounded-2xl p-6 w-full max-w-md mx-4"
            @click.stop
          >
            <h3 class="text-lg font-semibold text-webropol-gray-900 mb-4">Select Survey Folder</h3>
            <div class="space-y-2">
              <template x-for="folder in availableFolders" :key="folder">
                <button 
                  @click="selectedFolder = folder; showFolderModal = false"
                  :class="selectedFolder === folder ? 'bg-webropol-primary-50 text-webropol-primary-600' : 'hover:bg-webropol-gray-50'"
                  class="w-full text-left px-4 py-2 rounded-lg transition-colors"
                  x-text="folder"
                ></button>
              </template>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    function createSurveyApp() {
      return {
        surveyTitle: '',
        selectedFolder: 'Root folder',
        autoDeleteEnabled: true,
        deletionDate: '2026-09-18',
        activeTab: 'webropol',
        selectedTemplate: 'default',
        showFolderModal: false,
        currentPage: 0,

        templateTabs: [
          { id: 'webropol', name: 'Webropol templates', count: 43 },
          { id: 'my', name: 'My templates', count: 4 },
          { id: 'shared', name: 'Shared templates', count: 2 }
        ],

        availableFolders: [
          'Root folder',
          'Customer Surveys',
          'Employee Feedback',
          'Market Research',
          'Event Surveys'
        ],

        templates: {
          webropol: [
            { id: 'default', name: 'Default template', bars: [60, 40, 50] },
            { id: 'dark', name: 'A Default Dark', bars: [70, 30, 60] },
            { id: 'light-blue', name: 'A Default Light Blue', bars: [50, 60, 40] },
            { id: 'happy', name: 'AI: Happy', bars: [80, 45, 65] },
            { id: 'modern', name: 'AI: Modern', bars: [45, 70, 35] },
            { id: 'minimal', name: 'Minimal', bars: [65, 35, 55] },
            { id: 'corporate', name: 'Corporate', bars: [55, 50, 45] },
            { id: 'colorful', name: 'Colorful', bars: [75, 55, 70] },
            { id: 'professional', name: 'Professional', bars: [60, 40, 50] },
            { id: 'creative', name: 'Creative', bars: [85, 60, 75] }
          ],
          my: [
            { id: 'my-template-1', name: 'My Custom Template', bars: [70, 50, 60] },
            { id: 'my-template-2', name: 'Team Survey', bars: [60, 45, 55] },
            { id: 'my-template-3', name: 'Feedback Form', bars: [80, 40, 70] },
            { id: 'my-template-4', name: 'Event Survey', bars: [55, 65, 45] }
          ],
          shared: [
            { id: 'shared-1', name: 'Company Template', bars: [65, 55, 60] },
            { id: 'shared-2', name: 'Department Survey', bars: [75, 45, 65] }
          ]
        },

        get visibleTemplates() {
          const templates = this.templates[this.activeTab] || [];
          const startIndex = this.currentPage * 5;
          return templates.slice(startIndex, startIndex + 5);
        },

        get paginationDots() {
          const templates = this.templates[this.activeTab] || [];
          const totalPages = Math.ceil(templates.length / 5);
          return Array(totalPages).fill(null);
        },

        init() {
          // Set default date to one year from now
          const futureDate = new Date();
          futureDate.setFullYear(futureDate.getFullYear() + 1);
          this.deletionDate = futureDate.toISOString().split('T')[0];
        },

        createSurvey() {
          if (!this.surveyTitle || !this.selectedTemplate) {
            return;
          }
          
          // Simulate survey creation
          alert('Survey created successfully! Redirecting to survey editor...');
          
          // In a real app, this would redirect to the survey editor
          // window.location.href = `/surveys/edit/${surveyId}`;
        }
      }
    }
  </script>

  <!-- Floating Button -->
  <webropol-floating-button></webropol-floating-button>
</body>
</html>
